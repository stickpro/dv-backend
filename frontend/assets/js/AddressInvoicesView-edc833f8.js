import{d as $,f as g,m as I,k as A,g as _,_ as P,r as l,o,c as n,a as t,t as e,n as C,i as d,e as m,w as r,h as f,F as D,q as w,j as c}from"./flag-icons.min-86ec5348.js";import{U as x}from"./UiTable-55d04511.js";import{U as k}from"./UiCopyToClipboard-54d0ebb6.js";import"./UiSelect-ea4bca5c.js";import"./UiPagination-4e2c3226.js";import"./UiLoading-237702fa.js";const B=$({components:{UiTable:x,UiCopyToClipboard:k},data(){return{tableColumns:[{label:"Date",field:"createdAt",textAlign:"text-left"},{label:"Invoice Id",field:"id",textAlign:"text-left"},{label:"Store",field:"storeName",textAlign:"text-left"},{label:"Order Id",field:"orderId",textAlign:"text-left"},{label:"Status History",field:"statuses",textAlign:"text-center"},{label:"Amount",field:"amount",textAlign:"text-center"},{label:"Actions",field:"actions",textAlign:"text-right"}],currentPage:"1",perPage:"25",loading:!1}},computed:{address(){return this.$route.params.address},statusClass(){return s=>{switch(s){case"free":return"state-free";case"busy":return"state-busy";case"hold":return"state-hold";default:return"state-busy"}}},...g("addresses",{pagination:"addressInvoicesPagination",addressData:"addressData"}),...I("addresses",{addressInvoices:"getAddressInvoices"}),...g("stores",["storeFilterTrigger"])},watch:{async storeFilterTrigger(){this.loading=!0,this.setStoreFilterBtnLoading(!0),await this.loadAddressInvoicesData(this.currentPage,this.perPage),this.setStoreFilterBtnLoading(!1)}},async created(){this.addressInvoices.length&&this.$store.commit("app/setProgressBar","stop"),await this.loadAddressInvoicesData(this.currentPage,this.perPage)},unmounted(){this.setAddressInvoices([]),this.setAddressData({})},methods:{perPageSelectHandler(){this.loading=!0,this.loadAddressInvoicesData(this.currentPage,this.perPage)},pageChangeHandler(s){this.loading=!0,this.currentPage=s,this.loadAddressInvoicesData(this.currentPage,this.perPage)},async loadAddressInvoicesData(s,p){try{const i={page:s,perPage:p};await this.loadInvoicesByAddress({...i,address:this.address}),await this.getDataByAddress(this.address),this.loading=!1,this.$store.commit("app/setProgressBar","stop")}catch{this.loading=!1,this.$store.commit("app/setProgressBar","stop")}},...A("addresses",["loadInvoicesByAddress","getDataByAddress"]),..._("addresses",["setAddressInvoices","setAddressData"]),..._("stores",["setStoreFilterBtnLoading"])}});const S={class:"mb-6"},T={class:"address-title"},F={class:"break-all"},U={key:0,class:"card mb-4 h-scroll"},V={class:"w-full"},H={class:"border-b-8 border-transparent"},N={class:"text-left w-240px"},O={class:"text-left"},L={class:"border-b-8 border-transparent"},j={class:"text-left w-240px"},q={class:"text-left"},z={class:"border-b-8 border-transparent"},E={class:"text-left w-240px"},G={class:"text-left"},M={class:"border-b-8 border-transparent"},J={class:"text-left w-240px"},K={class:"text-left"},Q={class:"flex gap-8"},R={class:"border-b-8 border-transparent"},W={class:"text-left w-240px"},X={class:"text-left"},Y={class:"flex gap-8"},Z={class:"text-left w-240px"},ss={class:"text-left"},ts={key:1,class:"card"},es={class:"flex items-center gap-2"},as={class:"flex items-center gap-2"},os={key:0,class:"flex flex-col gap-2"},ns=c(" - "),rs={key:1,class:"text-gray-600"};function ds(s,p,i,is,ls,cs){const u=l("ui-copy-to-clipboard"),v=l("router-link"),b=l("ui-table");return o(),n("div",null,[t("div",S,[t("div",T,[t("span",null,e(s.$t("Invoices by address")),1),t("span",F,e(s.address),1)])]),Object.keys(s.addressData).length?(o(),n("div",U,[t("table",V,[t("tbody",null,[t("tr",H,[t("th",N,e(s.$t("Current status"))+":",1),t("td",O,[t("span",{class:C(["px-2 py-1",s.statusClass(s.addressData.state)])},e(s.addressData.state),3)])]),t("tr",L,[t("th",j,e(s.$t("Invoices Paid Count"))+":",1),t("td",q,e(s.addressData.invoices.paid),1)]),t("tr",z,[t("th",E,e(s.$t("Invoices Total Count"))+":",1),t("td",G,e(s.addressData.invoices.total),1)]),t("tr",M,[t("th",J,e(s.$t("Incoming Transactions"))+":",1),t("td",K,[t("div",Q,[t("span",null,e(`${s.$t("Count")}: ${s.addressData.transactions.incoming.count}`),1),t("span",null,e(`${s.$t("Amount")}: ${s.addressData.transactions.incoming.amountUsd} $`),1)])])]),t("tr",R,[t("th",W,e(s.$t("Outgoing Transactions"))+":",1),t("td",X,[t("div",Y,[t("span",null,e(`${s.$t("Count")}: ${s.addressData.transactions.outgoing.count}`),1),t("span",null,e(`${s.$t("Amount")}: ${s.addressData.transactions.outgoing.amountUsd} $`),1)])])]),t("tr",null,[t("th",Z,e(s.$t("Saved On Commissions"))+":",1),t("td",ss,e(`${s.addressData.savedUsdOnCommission} $`),1)])])])])):d("",!0),s.addressInvoices.length?(o(),n("div",ts,[m(b,{columns:s.tableColumns,data:s.addressInvoices,paginationable:"",loading:s.loading,"per-page-default":s.perPage,"total-entries":s.pagination.total,onPerPageSelectChanged:s.perPageSelectHandler,onPageChanged:s.pageChangeHandler},{"cell-id":r(({row:a})=>[t("div",es,[t("span",null,e(a.id),1),a.id?(o(),f(u,{key:0,"text-to-copy":a.id},null,8,["text-to-copy"])):d("",!0)])]),"cell-orderId":r(({row:a})=>[t("div",as,[t("span",null,e(a.orderId),1),a.orderId?(o(),f(u,{key:0,"text-to-copy":a.orderId},null,8,["text-to-copy"])):d("",!0)])]),"cell-statuses":r(({row:a})=>[a.statuses.length?(o(),n("div",os,[(o(!0),n(D,null,w(a.statuses,(h,y)=>(o(),n("div",{class:"flex gap-2 justify-center",key:y},[t("span",null,e(h.status),1),ns,t("span",null,e(h.datetime),1)]))),128))])):(o(),n("div",rs,e(s.$t("There is no history of statuses")),1))]),"cell-amount":r(({row:a})=>[c(e(a.amount)+" ("+e(a.currency)+") ",1)]),"cell-actions":r(({row:a})=>[m(v,{class:"link",to:{name:"invoice-details",params:{invoice_id:a.id}}},{default:r(()=>[c(e(s.$t("Details")),1)]),_:2},1032,["to"])]),_:1},8,["columns","data","loading","per-page-default","total-entries","onPerPageSelectChanged","onPageChanged"])])):d("",!0)])}const fs=P(B,[["render",ds],["__scopeId","data-v-a0dcef22"]]);export{fs as default};
