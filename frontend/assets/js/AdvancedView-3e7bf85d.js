import{d as _,f as $,k,_ as y,r as n,o as c,c as p,a as t,t as r,e as s,w as h,i as K,j as C,l as H}from"./flag-icons.min-86ec5348.js";import{U as I}from"./UiSwitcher-bf0903c2.js";import{U as w}from"./UiLoading-237702fa.js";import{U as F}from"./UiCopyToClipboard-54d0ebb6.js";import{U as v}from"./UiTable-55d04511.js";import{U as W}from"./UiButtonLoading-8a0e711d.js";import{U as L}from"./UiInput-de72e1ee.js";import"./UiSelect-ea4bca5c.js";import"./UiPagination-4e2c3226.js";const R=_({components:{UiSwitcher:I,UiLoading:w,UiCopyToClipboard:F,UiTable:v},data(){return{checked:!1,tableColumns:[{label:"Enabled",field:"enabled",textAlign:"text-left"},{label:"Api Key",field:"apikey",textAlign:"text-left"},{label:"Actions",field:"actions",textAlign:"text-right"}],loading:!1}},computed:{storeIdFromUrl(){return this.$route.params.store_id},...$("stores",["apiKeyList"])},created(){this.loadApiKeys(this.storeIdFromUrl)},methods:{async createApiKeyHandler(){this.loading=!0;try{await this.createApiKey(this.storeIdFromUrl),await this.loadApiKeys(this.storeIdFromUrl),this.loading=!1}catch{this.loading=!1}},async switchHandler(e,o){this.loading=!0;try{await this.updateApiKey({storeId:this.storeIdFromUrl,apiKeyId:e,payload:{enabled:!o}}),await this.loadApiKeys(this.storeIdFromUrl),this.loading=!1}catch{this.loading=!1}},async deleteApiKeyHandler(e){this.loading=!0;try{await this.deleteApiKey({storeId:this.storeIdFromUrl,apiKeyId:e}),await this.loadApiKeys(this.storeIdFromUrl),this.loading=!1}catch{this.loading=!1}},...k("stores",["createApiKey","loadApiKeys","updateApiKey","deleteApiKey"])}}),V={class:"card common-wrapper relative"},S={class:"mb-6"},T={class:"flex items-center justify-between mb-3"},x={class:"text-2xl"},D=["disabled"],j={key:0},P={class:"break-all flex items-center gap-2"},B={class:"flex justify-end items-center gap-6"},N=["onClick"],q={key:1};function z(e,o,m,f,g,U){const l=n("feather-icon"),d=n("ui-switcher"),a=n("ui-copy-to-clipboard"),u=n("ui-table"),b=n("ui-loading");return c(),p("div",V,[t("div",S,[t("div",T,[t("div",x,r(e.$t("Api Keys")),1),t("button",{class:"button button-primary px-4 py-2 flex items-center gap-1",disabled:e.loading,onClick:o[0]||(o[0]=(...i)=>e.createApiKeyHandler&&e.createApiKeyHandler(...i))},[s(l,{type:"plus",size:"16","stroke-width":"3"}),t("span",null,r(e.$t("Create Api Key")),1)],8,D)]),t("div",null,r(e.$t("Use the API by including the following HTTP Header in your requests")),1)]),e.apiKeyList.length?(c(),p("div",j,[s(u,{columns:e.tableColumns,data:e.apiKeyList,loading:e.loading},{"cell-enabled":h(({row:i})=>[s(d,{checked:i.enabled,onSwitched:A=>e.switchHandler(i.id,i.enabled)},null,8,["checked","onSwitched"])]),"cell-apikey":h(({row:i})=>[t("span",P,r(i.key),1)]),"cell-actions":h(({row:i})=>[t("div",B,[s(a,{"text-to-copy":i.key},null,8,["text-to-copy"]),t("button",{class:"button button-error py-1 px-2",onClick:A=>e.deleteApiKeyHandler(i.id)},r(e.$t("Delete")),9,N)])]),_:1},8,["columns","data","loading"])])):(c(),p("div",q,[s(b,{loading:e.loading},null,8,["loading"])]))])}const E=y(R,[["render",z]]),M=_({components:{UiLoading:w,UiTable:v},data(){return{tableColumns:[{label:"Url",field:"url",textAlign:"text-left"},{label:"Actions",field:"actions",textAlign:"text-right"}],loading:!1}},computed:{storeIdFromUrl(){return this.$route.params.store_id},...$("stores",["webhookList"])},created(){this.loadWebhooks(this.storeIdFromUrl)},methods:{createWebhookHandler(){this.$router.push({name:"store-settings-webhook-item",params:{webhook_id:"new"}})},testWebhookHandler(e){this.$router.push({name:"store-settings-webhook-test",params:{webhook_id:e}})},modifyWebhookHandler(e){this.$router.push({name:"store-settings-webhook-item",params:{webhook_id:e}})},async deleteWebhookHandler(e){this.loading=!0;try{await this.deleteWebhook({storeId:this.storeIdFromUrl,webhookId:e}),await this.loadWebhooks(this.storeIdFromUrl),this.loading=!1}catch{this.loading=!1}},...k("stores",["loadWebhooks","deleteWebhook"])}}),G={class:"card common-wrapper"},J={class:"mb-6"},O={class:"flex items-center justify-between mb-3 gap-4"},Q={class:"text-2xl"},X=["disabled"],Y={key:0,class:"relative"},Z={class:"flex justify-end gap-4"},ee=["onClick"],te=["onClick"],oe=["onClick"];function se(e,o,m,f,g,U){const l=n("feather-icon"),d=n("ui-table"),a=n("ui-loading");return c(),p("div",G,[t("div",J,[t("div",O,[t("div",Q,r(e.$t("Webhooks")),1),t("button",{class:"button button-primary px-4 py-2 flex items-center gap-1",disabled:e.loading,onClick:o[0]||(o[0]=(...u)=>e.createWebhookHandler&&e.createWebhookHandler(...u))},[s(l,{type:"plus",size:"16","stroke-width":"3"}),t("span",null,r(e.$t("Create Webhook")),1)],8,X)]),t("div",null,r(e.$t("Webhooks allow to send HTTP events related to your store to another server")),1)]),e.webhookList.length?(c(),p("div",Y,[s(d,{columns:e.tableColumns,data:e.webhookList},{"cell-actions":h(({row:u})=>[t("div",Z,[t("button",{class:"button button-secondary py-1 px-2",onClick:b=>e.testWebhookHandler(u.id)},r(e.$t("Test")),9,ee),t("button",{class:"button button-primary py-1 px-2",onClick:b=>e.modifyWebhookHandler(u.id)},r(e.$t("Modify")),9,te),t("button",{class:"button button-error py-1 px-2",onClick:b=>e.deleteWebhookHandler(u.id)},r(e.$t("Delete")),9,oe)])]),_:1},8,["columns","data"]),s(a,{loading:e.loading},null,8,["loading"])])):K("",!0)])}const re=y(M,[["render",se]]),ne=_({components:{UiButtonLoading:W,UiInput:L},data(){return{returnUrl:"",successUrl:"",buttonLoading:!1}},computed:{storeIdFromUrl(){return this.$route.params.store_id},...$("stores",{returnUrls:"returnUrls"})},created(){this.getReturnUrls(),this.syncDataFromVuex()},watch:{returnUrls(){this.syncDataFromVuex()}},methods:{getReturnUrls(){this.loadReturnUrls(this.storeIdFromUrl)},async updateReturnUrlsHandler(){try{this.buttonLoading=!0,await this.updateReturnUrls({storeId:this.storeIdFromUrl,payload:{returnUrl:this.returnUrl,successUrl:this.successUrl}}),this.buttonLoading=!1,this.$toast.success(this.$t("Return url successfully updated"))}catch{this.buttonLoading=!1}},syncDataFromVuex(){this.returnUrl=this.returnUrls.return_url,this.successUrl=this.returnUrls.success_url},...k("stores",["loadReturnUrls","updateReturnUrls"])}});const ae={class:"card common-wrapper"},ie={class:"text-2xl mb-6"};function le(e,o,m,f,g,U){const l=n("ui-input"),d=n("ui-button-loading");return c(),p("div",ae,[t("div",ie,r(e.$t("Return Url")),1),t("form",{class:"form",onSubmit:o[2]||(o[2]=H((...a)=>e.updateReturnUrlsHandler&&e.updateReturnUrlsHandler(...a),["prevent"]))},[s(l,{required:"",modelValue:e.returnUrl,"onUpdate:modelValue":o[0]||(o[0]=a=>e.returnUrl=a),type:"url",id:"returnUrl",label:e.$t("Return Url"),pattern:"https?://.+","pattern-vatidate-text":e.$t("Please match the url format")},null,8,["modelValue","label","pattern-vatidate-text"]),s(l,{required:"",modelValue:e.successUrl,"onUpdate:modelValue":o[1]||(o[1]=a=>e.successUrl=a),type:"url",id:"successUrl",label:e.$t("Success Url"),pattern:"https?://.+","pattern-vatidate-text":e.$t("Please match the url format")},null,8,["modelValue","label","pattern-vatidate-text"]),s(d,{class:"button button-primary py-2 px-4 self-start",type:"submit",loading:e.buttonLoading},{default:h(()=>[C(r(e.$t("Save")),1)]),_:1},8,["loading"])],32)])}const de=y(ne,[["render",le],["__scopeId","data-v-631778fb"]]),ue=_({components:{ApiKeys:E,WebhooksList:re,ReturnUrls:de}}),ce={class:"flex flex-col gap-6"};function pe(e,o,m,f,g,U){const l=n("api-keys"),d=n("webhooks-list"),a=n("return-urls");return c(),p("div",ce,[s(l),s(d),s(a)])}const ke=y(ue,[["render",pe]]);export{ke as default};
