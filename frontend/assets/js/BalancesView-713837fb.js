import{d as B,f as g,k as v,g as F,_ as x,r as i,o as u,c as p,a as s,t,e as n,F as U,q as P,n as L,w as d,j as c,v as E,a4 as T,i as $,h as k}from"./flag-icons.min-86ec5348.js";import{U as V}from"./UiCopyToClipboard-54d0ebb6.js";import{U as I}from"./UiPagination-4e2c3226.js";import{U as j}from"./UiSelect-ea4bca5c.js";import{U as N}from"./UiLoading-237702fa.js";import{U as q}from"./UiCheckbox-fa9f1ce9.js";import{U as D}from"./UiModal-af306091.js";import{U as O}from"./UiTooltipTd-2269d428.js";import{U as W}from"./UiTable-55d04511.js";import{U as R}from"./UiButtonLoading-8a0e711d.js";import{U as z}from"./UiSkeletonBox-7e5f2b59.js";const G=B({components:{UiCopyToClipboard:V,UiPagination:I,UiSelect:j,UiLoading:N,UiCheckbox:q,UiModal:D,UiTooltipTd:O},data(){return{currentPage:"1",perPage:"100",sortField:"balance_usd",sortDirection:"desc",filterField:"",filterValue:"all",isEmptyAddressesHide:!0,loading:!1,perPageOptions:[{title:"100",value:"100"},{title:"200",value:"200"},{title:"300",value:"300"}],sortBalanceDirectionOptions:[{title:this.$t("Descending"),value:"desc"},{title:this.$t("Ascending"),value:"asc"}],showModal:!1,modalLoading:!1,address:"",currencyId:""}},computed:{statusClass(){return e=>{switch(e){case"free":return"state-free";case"busy":return"state-busy";case"hold":return"state-hold";default:return"state-busy"}}},currencyOptions(){return[{title:this.$t("All"),value:"all"},...this.balances.map(e=>({title:e.currency,value:e.currency}))]},hideEmptyAddresses(){return this.isEmptyAddressesHide?"1":"0"},...g("addresses",{addressBalances:"addressBalances",pagination:"addressBalancesPagination",isAddressBalancesLoaded:"isAddressBalancesLoaded"}),...g("balances",{balances:"balances"}),...g("stores",["storeFilterTrigger"])},watch:{async storeFilterTrigger(){this.setStoreFilterBtnLoading(!0),this.setStoreFilterBtnLoading(!1)}},async created(){this.isAddressBalancesLoaded&&this.$store.commit("app/setProgressBar","stop"),this.isAddressBalancesLoaded||(this.loading=!0),await this.loadAddressBalancesData(this.currentPage,this.perPage)},methods:{perPageSelectHandler(){this.loading=!0,this.loadAddressBalancesData(this.currentPage,this.perPage)},pageChangeHandler(e){this.loading=!0,this.currentPage=e,this.loadAddressBalancesData(this.currentPage,this.perPage)},sortBalanceDirectionSelect(){this.loading=!0,this.loadAddressBalancesData(this.currentPage,this.perPage)},filterCurrencySelect(){this.loading=!0,this.filterValue==="all"?this.filterField="":this.filterField="currency_id",this.loadAddressBalancesData(this.currentPage,this.perPage)},hideEmptyAddressesHandler(){this.loading=!0,this.loadAddressBalancesData(this.currentPage,this.perPage)},async loadAddressBalancesData(e,l){try{const r={page:e,perPage:l,sortDirection:this.sortDirection,sortField:this.sortField};this.filterField&&(r.filterField=this.filterField,r.filterValue=this.filterValue),this.isEmptyAddressesHide&&(r.hideEmpty=this.hideEmptyAddresses),await this.loadAddressBalances(r),this.loading=!1,this.$store.commit("app/setProgressBar","stop")}catch{this.loading=!1,this.$store.commit("app/setProgressBar","stop")}},sendManuallyHandler(e,l){this.showModal=!0,this.address=e,this.currencyId=l},async transferFromAddressHandler(){try{this.modalLoading=!0,await this.transferFromAddress({addressFrom:this.address,currencyId:this.currencyId}),this.modalLoading=!1,this.$toast.success(this.$t("The request has been successfully sent")),this.showModal=!1}catch{this.modalLoading=!1}},...v("addresses",["loadAddressBalances","transferFromAddress"]),...F("stores",["setStoreFilterBtnLoading"])}});const J={key:0,class:"flex flex-col gap-10px relative"},K={class:"card"},Q={class:"flex flex-col gap-4"},X={class:"flex gap-6 items-center justify-between flex-wrap-reverse"},Y={class:"card-title"},Z={class:"flex gap-6 items-center flex-wrap"},ee={class:"flex items-center gap-2 text-sm"},se={class:"flex items-center gap-2 text-sm"},te={class:"flex items-center gap-2 text-sm"},ae={key:0,class:"cards-wrapper"},le={class:"flex flex-col gap-2"},oe={class:"card-media grid items-center justify-between gap-2"},ne={class:"flex items-center gap-2 py-1 w-full justify-self-start"},de={class:"flex items-center gap-2"},re=["href"],ie={class:"flex justify-between items-center gap-2"},ce={class:"flex flex-col gap-1 font-600 text-xl"},ue={class:"text-center"},pe={class:"text-sm text-gray-600 flex items-center gap-2 font-600"},he={class:"whitespace-nowrap"},fe=c(" - "),ge={class:"flex items-center justify-end"},me=["disabled","onClick"],ye={key:1,class:"card"},_e={class:"flex items-center justify-between"},be={class:"flex items-center gap-2 text-sm"},$e={class:"flex flex-col gap-2"},we={class:"flex items-center justify-center gap-2 break-all"},ve={class:"font-500"};function Be(e,l,r,m,C,A){const h=i("ui-select"),f=i("ui-checkbox"),y=i("router-link"),_=i("ui-copy-to-clipboard"),w=i("feather-icon"),o=i("ui-tooltip-td"),b=i("ui-pagination"),H=i("ui-loading"),S=i("ui-modal");return e.balances.length?(u(),p("div",J,[s("div",K,[s("div",Q,[s("div",X,[s("div",Y,t(e.$t("Balances of invoice addresses")),1)]),s("div",Z,[s("div",ee,[s("span",null,t(e.$t("Sort Balance By")),1),n(h,{class:"max-w-200px h-32px",modelValue:e.sortDirection,"onUpdate:modelValue":l[0]||(l[0]=a=>e.sortDirection=a),options:e.sortBalanceDirectionOptions,onChange:e.sortBalanceDirectionSelect},null,8,["modelValue","options","onChange"])]),s("div",se,[s("span",null,t(e.$t("Filter By Currency")),1),n(h,{class:"max-w-200px h-32px",modelValue:e.filterValue,"onUpdate:modelValue":l[1]||(l[1]=a=>e.filterValue=a),options:e.currencyOptions,onChange:e.filterCurrencySelect},null,8,["modelValue","options","onChange"])]),s("div",te,[s("span",null,t(e.$t("Hide Empty And Free Addresses")),1),n(f,{modelValue:e.isEmptyAddressesHide,"onUpdate:modelValue":l[2]||(l[2]=a=>e.isEmptyAddressesHide=a),onChecked:e.hideEmptyAddressesHandler},null,8,["modelValue","onChecked"])])])])]),e.addressBalances.length?(u(),p("div",ae,[(u(!0),p(U,null,P(e.addressBalances,(a,M)=>(u(),p("div",{key:M,class:L(["card !p-3",{"tablet:max-w-448px":e.addressBalances.length===1,"!bg-red-100":e.addressBalances.balance!==e.addressBalances.balanceFromExplorer}])},[s("div",le,[s("div",oe,[s("div",ne,[n(y,{to:{name:"balances-address-invoices",params:{address:a.address}},class:"address-full-hide link text-xs"},{default:d(()=>[c(t(a.address),1)]),_:2},1032,["to"]),n(y,{to:{name:"balances-address-invoices",params:{address:a.address}},class:"address-short-hide link text-xs"},{default:d(()=>[c(t(`${a.address.slice(0,7)}...${a.address.slice(-7)}`),1)]),_:2},1032,["to"]),s("div",de,[E(n(_,{"text-to-copy":a.address},null,8,["text-to-copy"]),[[T,a.address]]),s("a",{href:a.explorerUrl,class:"flex item-center justify-center",target:"_blank",ref_for:!0,ref:"noopener noreferrer"},[n(w,{type:"external-link",size:"16"})],8,re)])]),s("div",{class:L(["justify-self-end w-full h-29px flex items-center justify-center text-xs",e.statusClass(a.state)])},t(a.state),3)]),s("div",ie,[s("div",ce,[s("div",null,t(a.balanceUsd)+" $ ",1),s("div",null,t(a.balance)+" "+t(a.currencyId.split(".")[0]),1)]),s("div",ue,[n(o,{class:"bg-gray-200 p-1 rounded",text:a.statusDescription},{default:d(()=>[c(t(a.statusTitle),1)]),_:2},1032,["text"])])]),s("div",pe,[s("span",he,t(a.balanceFromExplorer)+" "+t(a.currencyId.split(".")[0]),1),fe,s("span",null,t(e.$t("From explorer")),1)]),s("div",ge,[s("button",{class:"button button-primary px-5 py-6px",disabled:!(a.balanceUsd>0),onClick:Je=>e.sendManuallyHandler(a.address,a.currencyId)},t(e.$t("Send")),9,me)])])],2))),128))])):$("",!0),e.addressBalances.length?(u(),p("div",ye,[s("div",_e,[s("div",be,[s("span",null,t(e.$t("Show")),1),n(h,{class:"max-w-90px h-38px",modelValue:e.perPage,"onUpdate:modelValue":l[3]||(l[3]=a=>e.perPage=a),options:e.perPageOptions,onChange:e.perPageSelectHandler},null,8,["modelValue","options","onChange"]),s("span",null,t(e.$t("entries")),1)]),n(b,{current:Number(e.currentPage),total:Number(e.pagination.total),"per-page":Number(e.perPage),onPageChange:e.pageChangeHandler},null,8,["current","total","per-page","onPageChange"])])])):$("",!0),n(H,{loading:e.loading},null,8,["loading"]),n(S,{modelValue:e.showModal,"onUpdate:modelValue":l[4]||(l[4]=a=>e.showModal=a),loading:e.modalLoading,onConfirm:e.transferFromAddressHandler},{title:d(()=>[c(t(e.$t("Send manually"))+"? ",1)]),default:d(()=>[s("div",$e,[s("div",null,t(e.$t("Do you want to send funds from this address?")),1),s("div",we,[s("span",ve,t(e.address),1),n(_,{"text-to-copy":e.address},null,8,["text-to-copy"])])])]),_:1},8,["modelValue","loading","onConfirm"])])):$("",!0)}const xe=x(G,[["render",Be],["__scopeId","data-v-1b19720f"]]),Ce=B({components:{UiTable:W,UiButtonLoading:R,UiModal:D,UiCopyToClipboard:V,UiSkeletonBox:z},data(){return{skeletonLoading:!1,tableLoading:!1,tableColumn:[{label:"Currency",field:"currency",textAlign:"text-left"},{label:"Busy",field:"busy",textAlign:"text-center"},{label:"Free",field:"free",textAlign:"text-center"},{label:"Hold",field:"hold",textAlign:"text-center"},{label:"Total Count",field:"total",textAlign:"text-center"},{label:"Balance",field:"balanceUsd",textAlign:"text-center"},{label:"Actions",field:"actions",textAlign:"text-right"}],btnLoading:{},showModal:!1,modalLoading:!1,addresses:[]}},computed:{...g("balances",{balances:"balances",totals:"totals",isBalancesLoaded:"isBalancesLoaded"}),...g("wallets",{wallets:"wallets"}),...g("stores",["storeFilterTrigger"])},created(){this.isBalancesLoaded||(this.skeletonLoading=!0),this.loadData()},watch:{async storeFilterTrigger(){this.tableLoading=!0,this.setStoreFilterBtnLoading(!0),await this.loadData(),this.setStoreFilterBtnLoading(!1)}},methods:{...v("wallets",["loadAndCreateWallets","withdrawalsRequest"]),...v("balances",["loadBalances"]),...F("stores",["setStoreFilterBtnLoading"]),async loadData(){try{await this.loadBalances(),this.skeletonLoading=!1,this.tableLoading=!1}catch{this.skeletonLoading=!1,this.tableLoading=!1}},async showModalHandler(e){this.addresses=[];try{this.btnLoading[e]=!0,await this.loadAndCreateWallets(),this.syncDataFromVuex(e),this.showModal=!0,this.btnLoading[e]=!1}catch{this.btnLoading[e]=!1}},async confirmModalHandler(){try{this.modalLoading=!0,await Promise.all(this.addresses.map(async e=>{await this.withdrawalsRequest({currencyId:e.currencyId})})),this.modalLoading=!1,this.$toast.success(this.$t("The request has been successfully sent")),this.showModal=!1}catch{this.modalLoading=!1}},syncDataFromVuex(e){if(e==="all"){const l=[];this.balances.forEach(r=>{this.wallets.forEach(m=>{r.currency.split(".")[1].toLowerCase()===m.blockchain&&l.push({address:m.address,currency:r.currency.split(".")[0],currencyId:r.currency})})}),this.addresses=l}else{const l=e.split(".")[1].toLowerCase();this.addresses=this.wallets.filter(r=>r.blockchain===l).map(r=>({address:r.address,currency:e.split(".")[0],currencyId:e}))}}}}),Ae={key:1,class:"card"},Le={class:"card-title mb-4"},ke={class:"border-b border-gray-200 font-600"},Fe={class:"py-4 px-3"},Ue={class:"py-4 px-3 text-center"},Pe={class:"py-4 px-3 text-center"},Ve={class:"py-4 px-3 text-center"},De={class:"py-4 px-3 text-center"},He={class:"py-4 px-3 text-center"},Se={class:"py-4 px-3 text-right"},Me={class:"flex flex-col gap-4"},Ee={class:"flex gap-1"},Te={class:"font-600 uppercase"},Ie={key:0,class:"flex items-center gap-1 break-all"},je={class:"font-500"},Ne={key:1,class:"flex flex-col gap-2"};function qe(e,l,r,m,C,A){const h=i("ui-skeleton-box"),f=i("ui-button-loading"),y=i("ui-table"),_=i("ui-copy-to-clipboard"),w=i("ui-modal");return e.skeletonLoading?(u(),k(h,{key:0,width:"100%",height:"298px"})):(u(),p("div",Ae,[s("div",Le,t(e.$t("Addresses Count")),1),e.balances.length?(u(),k(y,{key:0,columns:e.tableColumn,data:e.balances,loading:e.tableLoading},{"cell-currency":d(({row:o})=>[c(t(o.currency.split(".")[0])+" ("+t(o.currency.split(".")[1])+") ",1)]),"cell-busy":d(({row:o})=>[c(t(o.addressCount.busy),1)]),"cell-free":d(({row:o})=>[c(t(o.addressCount.free),1)]),"cell-hold":d(({row:o})=>[c(t(o.addressCount.hold),1)]),"cell-total":d(({row:o})=>[c(t(o.addressCount.total),1)]),"cell-balanceUsd":d(({row:o})=>[c(t(o.balanceUsd)+" $ ",1)]),"cell-actions":d(({row:o})=>[n(f,{class:"button button-primary py-1 px-2",loading:e.btnLoading[o.currency],onClick:b=>e.showModalHandler(o.currency)},{default:d(()=>[c(t(`${e.$t("Withdraw")} ${o.currency.split(".")[0]}`),1)]),_:2},1032,["loading","onClick"])]),tfoot:d(()=>[s("tr",ke,[s("td",Fe,t(e.$t("Total"))+":",1),s("td",Ue,t(e.totals.addressCount.busy),1),s("td",Pe,t(e.totals.addressCount.free),1),s("td",Ve,t(e.totals.addressCount.hold),1),s("td",De,t(e.totals.addressCount.total),1),s("td",He,t(e.totals.amountUsd)+" $",1),s("td",Se,[n(f,{class:"button button-primary py-1 px-2",loading:e.btnLoading.all,onClick:l[0]||(l[0]=o=>e.showModalHandler("all"))},{default:d(()=>[c(t(`${e.$t("Withdraw")} ${e.$t("All")}`),1)]),_:1},8,["loading"])])])]),_:1},8,["columns","data","loading"])):$("",!0),n(w,{modelValue:e.showModal,"onUpdate:modelValue":l[1]||(l[1]=o=>e.showModal=o),loading:e.modalLoading,onConfirm:e.confirmModalHandler},{title:d(()=>[c(t(e.$t("Request a withdrawal")),1)]),default:d(()=>[s("div",Me,[(u(!0),p(U,null,P(e.addresses,(o,b)=>(u(),p("div",{key:b,class:"flex flex-col gap-2 items-center"},[s("div",Ee,[s("span",Te,t(o.currency),1),s("span",null,t(e.$t("To Address"))+":",1)]),o.address?(u(),p("div",Ie,[s("span",je,t(o.address),1),n(_,{"text-to-copy":o.address},null,8,["text-to-copy"])])):(u(),p("div",Ne,[s("div",null,t(e.$t("Address is empty")),1)]))]))),128))])]),_:1},8,["modelValue","loading","onConfirm"])]))}const Oe=x(Ce,[["render",qe]]),We=B({components:{BalanceAddressCards:xe,HotWalletsStats:Oe}}),Re={class:"page-title mb-6"},ze={class:"flex flex-col gap-8"};function Ge(e,l,r,m,C,A){const h=i("hot-wallets-stats"),f=i("balance-address-cards");return u(),p("div",null,[s("div",Re,t(e.$t("Hot Wallets")),1),s("div",ze,[n(h),n(f)])])}const ns=x(We,[["render",Ge]]);export{ns as default};
