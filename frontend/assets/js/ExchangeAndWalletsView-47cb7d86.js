import{d as g,f as u,k as C,_ as m,r as l,o as s,c as i,a,t as n,F as E,q as v,e as c,w as p,l as B,i as h,j as _,h as W}from"./flag-icons.min-86ec5348.js";import{U}from"./UiButtonLoading-8a0e711d.js";import{U as N}from"./UiInput-de72e1ee.js";import{U as k}from"./UiTable-55d04511.js";import{U as L}from"./UiCopyToClipboard-54d0ebb6.js";import{U as A}from"./UiSkeletonBox-7e5f2b59.js";import"./UiSelect-ea4bca5c.js";import"./UiPagination-4e2c3226.js";import"./UiLoading-237702fa.js";const D=g({components:{UiButtonLoading:U,UiInput:N},data(){return{currentExchangeValue:{},saveBtnLoading:!1,testBtnLoading:!1,isExchangeKeysExist:!1,connectBtnLoading:!1}},computed:{...u("exchanges",{listOfExchanges:"listOfExchanges",isWalletsLoaded:"isWalletsLoaded"}),...u("dictionaries",{exchanges:"exchanges"}),exchangeName(){return this.$route.params.exchange_name}},watch:{listOfExchanges(){this.syncDataFromVuex()}},created(){this.listOfExchanges.length&&this.isWalletsLoaded&&this.$store.commit("app/setProgressBar","stop"),this.loadData(),this.syncDataFromVuex()},methods:{...C("exchanges",["loadListOfExchanges","updateExchangeKeys","testExchange","connect","loadWallets"]),syncDataFromVuex(){this.currentExchangeValue=[...this.listOfExchanges].filter(e=>e.exchange.toLowerCase()===this.exchangeName)[0],this.currentExchangeValue&&(this.isExchangeKeysExist=this.currentExchangeValue.keys.reduce((e,o)=>o.name==="accessKey"&&o.value?!0:e,!1))},async loadData(){try{await this.loadListOfExchanges(),this.isExchangeKeysExist&&await this.loadWallets({exchange:this.exchangeName}),this.$store.commit("app/setProgressBar","stop")}catch{this.$store.commit("app/setProgressBar","stop")}},async connectHandler(){try{this.connectBtnLoading=!0;const e={...this.currentExchangeValue,keys:this.currentExchangeValue.keys.map(o=>({name:o.name,value:o.value}))};await this.connect(e),this.connectBtnLoading=!1,this.$toast.success(this.$t("Connection success"))}catch{this.connectBtnLoading=!1}}}}),O={class:"card"},S={class:"page-title font-600 mb-6"},F={key:0},K={class:"flex gap-6 text-lg mb-4"},j={class:"flex flex-col gap-4 mb-6"},H={class:"flex items-center justify-between"};function P(e,o,x,f,$,y){const r=l("ui-input"),d=l("ui-button-loading");return s(),i("div",O,[a("div",S,n(e.$t("Exchange settings")),1),e.currentExchangeValue?(s(),i("div",F,[a("div",K,[a("div",null,n(e.$t("Exchange"))+":",1),a("div",null,n(e.currentExchangeValue.exchange),1)]),a("form",{onSubmit:o[0]||(o[0]=B((...t)=>e.connectHandler&&e.connectHandler(...t),["prevent"]))},[a("div",j,[(s(!0),i(E,null,v(e.currentExchangeValue.keys,(t,w)=>(s(),i("div",{key:w,class:"grid gap-2 grid-cols-[150px,1fr] items-center"},[a("label",null,n(t.title),1),c(r,{required:"",type:"text",modelValue:t.value,"onUpdate:modelValue":b=>t.value=b},null,8,["modelValue","onUpdate:modelValue"])]))),128))]),a("div",H,[c(d,{class:"button button-primary px-4 py-2",type:"submit",loading:e.connectBtnLoading},{default:p(()=>[_(n(e.$t("Connect")),1)]),_:1},8,["loading"])])],32)])):h("",!0)])}const T=m(D,[["render",P]]),q=g({components:{UiTable:k,UiCopyToClipboard:L},data(){return{tableColumn:[{label:"Chain",field:"chain",textAlign:"text-left"},{label:"Address",field:"address",textAlign:"text-left"}]}},computed:{...u("exchanges",{depositWallets:"depositWallets"})}}),I={key:0,class:"card"},M={class:"card-title mb-6"},z={class:"flex items-center gap-2"};function G(e,o,x,f,$,y){const r=l("ui-copy-to-clipboard"),d=l("ui-table");return e.depositWallets.length?(s(),i("div",I,[a("div",M,n(e.$t("Deposit wallets")),1),c(d,{columns:e.tableColumn,data:e.depositWallets},{"cell-chain":p(({row:t})=>[_(n(t.chain.toUpperCase()),1)]),"cell-address":p(({row:t})=>[a("div",z,[a("span",null,n(t.address),1),t.address?(s(),W(r,{key:0,"text-to-copy":t.address},null,8,["text-to-copy"])):h("",!0)])]),_:1},8,["columns","data"])])):h("",!0)}const J=m(q,[["render",G]]),Q=g({components:{UiTable:k,UiCopyToClipboard:L},data(){return{tableColumn:[{label:"Chain",field:"chain",textAlign:"text-left"},{label:"Address",field:"address",textAlign:"text-left"}]}},computed:{...u("exchanges",{withdrawalWallets:"withdrawalWallets"})}}),R={key:0,class:"card"},X={class:"card-title mb-6"},Y={class:"flex items-center gap-2"};function Z(e,o,x,f,$,y){const r=l("ui-copy-to-clipboard"),d=l("ui-table");return e.withdrawalWallets.length?(s(),i("div",R,[a("div",X,n(e.$t("Withdrawal wallets")),1),c(d,{columns:e.tableColumn,data:e.withdrawalWallets},{"cell-chain":p(({row:t})=>[_(n(t.chain.toUpperCase()),1)]),"cell-address":p(({row:t})=>[a("div",Y,[a("span",null,n(t.address),1),t.address?(s(),W(r,{key:0,"text-to-copy":t.address},null,8,["text-to-copy"])):h("",!0)])]),_:1},8,["columns","data"])])):h("",!0)}const ee=m(Q,[["render",Z]]),te=g({components:{ExchangeSettings:T,DepositWallets:J,WithdrawalWallets:ee,UiSkeletonBox:A},computed:{...u("exchanges",{isWalletsLoaded:"isWalletsLoaded",depositWallets:"depositWallets",walletsLoading:"walletsLoading"}),exchangeName(){return this.$route.params.exchange_name}}}),ae={class:"flex flex-col gap-6"},se={key:0,class:"grid gap-6 grid-cols-[1fr,1fr]"},ne={key:1,class:"flex gap-6 flex-wrap"},oe={key:2,class:"flex justify-end"};function le(e,o,x,f,$,y){const r=l("exchange-settings"),d=l("ui-skeleton-box"),t=l("deposit-wallets"),w=l("withdrawal-wallets"),b=l("router-link");return s(),i("div",ae,[c(r),e.walletsLoading&&!e.isWalletsLoaded?(s(),i("div",se,[(s(),i(E,null,v(2,V=>c(d,{key:V,width:"100%",height:"100px"})),64))])):(s(),i("div",ne,[c(t),c(w)])),e.depositWallets.length?(s(),i("div",oe,[c(b,{class:"button button-primary px-4 py-2",to:{name:"withdrawals-exchange-2",params:{exchange_name:e.exchangeName}}},{default:p(()=>[_(n(e.$t("Next Step")),1)]),_:1},8,["to"])])):h("",!0)])}const _e=m(te,[["render",le]]);export{_e as default};
