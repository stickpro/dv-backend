import{d as D,f as E,k,_ as w,r as i,o,c as a,a as l,t as r,F as p,q as u,e as c,w as g,j as m}from"./flag-icons.min-86ec5348.js";import{U as S}from"./UiSelect-ea4bca5c.js";import{U}from"./UiButtonLoading-8a0e711d.js";import{U as C}from"./UiSkeletonBox-7e5f2b59.js";const L=D({components:{UiSelect:S,UiButtonLoading:U,UiSkeletonBox:C},data(){return{skeletonLoading:!0,toSelected:{},buttonLoading:!1,testCheck:!1}},computed:{...E("exchanges",{allExchangeDirections:"allExchangeDirections",userExchangeDirections:"userExchangeDirections"}),allExchangeDirectionsFormat(){return Object.entries(this.allExchangeDirections).reduce((e,t)=>(e[t[0]]=t[1].map(s=>({title:s.toCurrencyId.toUpperCase(),value:s.symbol,currencyTo:s.toCurrencyId,symbol:s.symbol})),e),{})},exchangeName(){return this.$route.params.exchange_name}},created(){this.loadData()},methods:{...k("exchanges",["loadAllExchangeDirections","loadUserExchangeDirections","updateUserExchangeDirections"]),async loadData(){try{await Promise.all([this.loadAllExchangeDirections({exchange:this.exchangeName}),this.loadUserExchangeDirections({exchange:this.exchangeName})]),this.setDirections(),this.$store.commit("app/setProgressBar","stop"),this.skeletonLoading=!1}catch{this.$store.commit("app/setProgressBar","stop"),this.skeletonLoading=!1}},setDirections(){this.toSelected=Object.entries(this.allExchangeDirections).reduce((e,t)=>(e[t[0]]=this.userExchangeDirections.length?this.userExchangeDirections.find(s=>s.currencyFrom===t[0]).symbol:t[1][0].symbol,e),{})},async nextStepHandler(){try{this.buttonLoading=!0;const e=Object.entries(this.allExchangeDirections).reduce((t,s)=>(t[s[0]]=s[1].filter(h=>h.symbol===this.toSelected[s[0]]),t),{});await Promise.all(Object.entries(e).map(async t=>this.updateUserExchangeDirections({exchange:this.exchangeName,currencyFrom:t[0],currencyTo:t[1][0].toCurrencyId,symbol:t[1][0].symbol}))),this.$router.push({name:"withdrawals-exchange-3",params:{exchange_name:this.exchangeName}}),this.buttonLoading=!1}catch{this.buttonLoading=!1}}}}),$={class:"card"},N={class:"page-title font-600 mb-6"},v={key:0,class:"flex flex-col gap-6 mb-8"},F={key:1,class:"flex flex-col gap-6 mb-8"},V={class:"flex items-center justify-center w-100px h-42px border bg-gray-200",for:"toSelectedFirstPair"},j=l("div",null,"/",-1),B={class:"flex items-center gap-4 justify-between"};function P(e,t,s,h,O,A){const x=i("ui-skeleton-box"),b=i("ui-select"),f=i("router-link"),y=i("ui-button-loading");return o(),a("div",$,[l("div",N,r(e.$t("Exchange directions")),1),e.skeletonLoading?(o(),a("div",v,[(o(),a(p,null,u(2,d=>c(x,{key:d,width:"240px",height:"42px"})),64))])):(o(),a("div",F,[(o(!0),a(p,null,u(e.allExchangeDirectionsFormat,(d,n)=>(o(),a("div",{key:n,class:"flex items-center gap-2"},[l("label",V,r(n.toUpperCase()),1),j,c(b,{id:"toSelectedFirstPair",class:"w-100px max-w-200px h-42px",modelValue:e.toSelected[n],"onUpdate:modelValue":_=>e.toSelected[n]=_,options:d},null,8,["modelValue","onUpdate:modelValue","options"])]))),128))])),l("div",B,[c(f,{class:"button button-primary px-4 py-2",to:{name:"withdrawals-exchange-1",params:{exchange_name:e.exchangeName}}},{default:g(()=>[m(r(e.$t("Return")),1)]),_:1},8,["to"]),c(y,{class:"button button-primary px-4 py-2",loading:e.buttonLoading,onClick:e.nextStepHandler},{default:g(()=>[m(r(e.$t("Next Step")),1)]),_:1},8,["loading","onClick"])])])}const R=w(L,[["render",P]]);export{R as default};
