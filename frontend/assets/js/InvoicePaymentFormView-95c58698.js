import{d as m,f as w,k as T,_ as v,o as n,c as i,a as t,t as o,i as u,m as I,r,e as d,w as L,j as F,g as k,s as H,v as P,l as A,F as S,q as D,n as $,a2 as x,h as g}from"./flag-icons.min-86ec5348.js";import{U as N}from"./UiButtonLoading-8a0e711d.js";import{i as M}from"./image-9977a1bb.js";import{U as O,P as z}from"./PaymentFormLocale-0a7fa924.js";import{U as q}from"./UiCopyToClipboard-54d0ebb6.js";import{U as E}from"./UiLoading-237702fa.js";import{U as j}from"./UiExpand-e56b18da.js";import{U as K}from"./UiSkeletonBox-7e5f2b59.js";const R=m({data(){return{invoiceExpiredTimer:0}},computed:{...w("invoice",{invoice:"invoice",invoiceTimerData:"invoiceTimerData"}),invoiceId(){return this.$route.params.invoice_id}},mounted(){this.initializeTimer()},beforeUnmount(){clearInterval(this.invoiceExpiredTimer)},methods:{...T("invoice",["invoiceTimer"]),updateTimer(){this.invoiceTimer(),this.invoiceTimerData.total<=0&&clearInterval(this.invoiceExpiredTimer)},initializeTimer(){this.updateTimer(),this.invoiceExpiredTimer=setInterval(this.updateTimer,1e3)}}});const W={class:"wrapper"},Q={class:"flex items-center justify-center w-62px"},G={key:0};function X(e,s,h,_,y,f){return n(),i("div",W,[t("div",null,o(e.$t("expire")),1),t("div",Q,[e.invoiceTimerData.days!=="0"?(n(),i("span",G,o(e.invoiceTimerData.days)+": ",1)):u("",!0),t("span",null,o(e.invoiceTimerData.hours)+": ",1),t("span",null,o(e.invoiceTimerData.minutes)+": ",1),t("span",null,o(e.invoiceTimerData.seconds),1)])])}const Y=v(R,[["render",X],["__scopeId","data-v-19b618ca"]]),J=m({components:{PaymentFormCountdown:Y,UiButtonLoading:N},data(){return{confirmBtnLoading:!1}},computed:{...w("invoice",{invoice:"invoice",invoiceAddresses:"invoiceAddresses",selectedCurrency:"selectedCryptocurrencyAndNetwork"}),...I("invoice",{selectedFindIndex:"selectedCryptocurrencyIndex"}),invoiceId(){return this.$route.params.invoice_id},selectedIndex(){return this.selectedFindIndex(this.selectedCurrency)},showConfirmBtn(){return this.invoice.status==="partially_paid"||this.invoice.status==="waiting_confirmations"}},methods:{...T("invoice",["confirmInvoice"]),async confirmInvoiceHandler(){try{this.confirmBtnLoading=!0,await this.confirmInvoice(this.invoiceId),this.confirmBtnLoading=!1,this.$toast.success(this.$t("Payment confirmed"))}catch{this.confirmBtnLoading=!1}}}});const Z={class:"wrapper px-20px py-16px"},ee={key:0,class:"flex items-center justify-between"},te={class:"flex flex-col gap-1"},se={class:"leading-22px text-base font-600"},oe={class:"rate-description"},ne={key:1,class:"flex items-center justify-between"},ie={class:"flex flex-col gap-1"},ae={class:"leading-22px text-base font-600"},ce={class:"confirm-description"};function re(e,s,h,_,y,f){var p,l,C;const c=r("payment-form-countdown"),a=r("ui-button-loading");return n(),i("div",Z,[e.showConfirmBtn?(n(),i("div",ne,[t("div",ie,[t("div",ae,o(e.$t("Your payment has been received")),1),t("div",ce,o(e.$t("Please confirm payment")),1)]),d(a,{class:"confirm-btn",loading:e.confirmBtnLoading,"spinner-color":"#585961",onClick:e.confirmInvoiceHandler},{default:L(()=>[F(o(e.$t("Confirm payment")),1)]),_:1},8,["loading","onClick"])])):(n(),i("div",ee,[t("div",te,[t("div",se," 1 "+o((p=e.invoiceAddresses[e.selectedIndex])==null?void 0:p.currency.split(".")[0])+" = "+o((l=e.invoiceAddresses[e.selectedIndex])==null?void 0:l.rate)+" USD ",1),t("div",oe,o((C=e.invoiceAddresses[e.selectedIndex])==null?void 0:C.currency.split(".")[0])+" "+o(e.$t("rate frozen for 10 min")),1)]),t("div",null,[d(c)])]))])}const de=v(J,[["render",re],["__scopeId","data-v-dff1f09a"]]),le=m({components:{PaymentFormUpdater:de},data(){return{isShowDropdownMenu:!1}},computed:{...w("invoice",{invoice:"invoice",pages:"pages",currentPage:"currentPage",stepPayment:"stepPayment",invoiceMsgStatus:"invoiceMsgStatus"}),showUpdaterCountdown(){return this.currentPage===1&&this.stepPayment===3&&!this.invoiceMsgStatus.formHide}},methods:{...k("invoice",["setCurrentPage"]),clickHandler(e){this.setCurrentPage(e),this.closeDropdownMenu()},showDropdownMenu(){this.isShowDropdownMenu=!this.isShowDropdownMenu},closeDropdownMenu(){this.isShowDropdownMenu=!1}}});const pe={class:"relative z-11"},ue={class:"header"},he={class:"text-26px text-white"},_e={class:"flex items-center gap-2 text-white"},me=["href"],ve=["onClick"],ye={key:0,class:"absolute w-full"};function fe(e,s,h,_,y,f){const c=r("feather-icon"),a=r("payment-form-updater"),p=H("click-out");return n(),i("div",pe,[t("div",ue,[t("div",he,o(e.invoice.store),1),t("div",_e,[e.invoice.returnUrl?(n(),i("a",{key:0,href:e.invoice.returnUrl,target:"_blank",ref:"noopener noreferrer",class:"border-2 border-white rounded-48px py-10px px-22px leading-16px text-sm cursor-pointer"},o(e.$t("Go to the store")),9,me)):u("",!0),e.invoice.storeStatus===1?P((n(),i("div",{key:1,"aria-hidden":"true",class:"flex cursor-pointer relative",onClick:s[1]||(s[1]=(...l)=>e.showDropdownMenu&&e.showDropdownMenu(...l))},[d(c,{class:"border-2 border-white rounded-1/2 p-8px",type:e.isShowDropdownMenu?"x":"more-vertical",size:"20"},null,8,["type"]),e.isShowDropdownMenu?(n(),i("div",{key:0,class:"dropdown-menu",onClick:s[0]||(s[0]=A(()=>{},["stop"]))},[(n(!0),i(S,null,D(e.pages,(l,C)=>(n(),i("div",{key:C,"aria-hidden":"true",class:$(["dropdown-menu-item",{"dropdown-menu-item-selected":l.page===e.currentPage}]),onClick:b=>e.clickHandler(l.page)},o(e.$t(l.title)),11,ve))),128))])):u("",!0)])),[[p,e.closeDropdownMenu]]):u("",!0)])]),e.showUpdaterCountdown?(n(),i("div",ye,[d(a)])):u("",!0)])}const $e=v(le,[["render",fe],["__scopeId","data-v-dc8a3d0b"]]),we=m({computed:{...w("invoice",{invoice:"invoice"}),invoiceId(){return this.$route.params.invoice_id}},methods:{...k("invoice",["setCurrentPage"]),howToPayHandler(){this.setCurrentPage(2)}}});const ge={class:"flex items-center justify-between gap-2"},ke={class:"flex flex-col gap-4px"},be={class:"text-2xl font-600"},Ce={class:"text-xs leading-14px font-600 text-md-gray"},Ie={class:"font-600"};function Se(e,s,h,_,y,f){return n(),i("div",null,[t("div",ge,[t("div",ke,[t("span",be,o(e.invoice.amount)+" USD ",1),t("span",Ce,o(e.invoiceId),1)]),t("div",{"aria-hidden":"true",class:"order-details",onClick:s[0]||(s[0]=(...c)=>e.howToPayHandler&&e.howToPayHandler(...c))},[t("span",Ie,o(e.$t("How to pay")),1)])])])}const De=v(we,[["render",Se],["__scopeId","data-v-330a9d7f"]]),Pe=m({data(){return{searchValue:""}},computed:{...w("invoice",{invoiceAddresses:"invoiceAddresses",selectedCryptocurrency:"selectedCryptocurrency"}),cryptocurrencyOptions(){return this.invoiceAddresses.filter((e,s,h)=>h.findIndex(_=>_.currency.split(".")[0]===e.currency.split(".")[0])===s).map(e=>{const s=e.currency.split(".")[0];return{currency:s==="USDT"?`Tether (${s})`:`${e.currency.split(".")[1]} (${s})`,value:e.currency,amount:e.amount,rate:e.rate,symbol:s}})},searchedCryptocurrency(){return this.cryptocurrencyOptions.filter(e=>e.currency.toLowerCase().includes(this.searchValue.toLowerCase()))}},created(){this.setSelectedCryptocurrency({symbol:"",value:""})},methods:{...k("invoice",["setSelectedCryptocurrency","setSelectedNetwork"]),image:M,selectHandler(e,s){e==="USDT"?this.setSelectedCryptocurrency({symbol:e,value:s}):(this.setSelectedCryptocurrency({symbol:e,value:s}),this.setSelectedNetwork({blockchain:s.split(".")[1],value:s}))}}});const Le={class:"title mb-15px"},Ae={class:"input-wrapper mb-20px"},Te={for:"search"},He=["placeholder"],xe={class:"flex flex-col gap-15px"},Me=["onClick"],Ue={class:"flex items-center gap-2"},Fe=["src","alt"],Ne={class:"flex flex-col"},ze={class:"font-600 text-base"},qe={class:"cryptocurrency-item-rate"},Be={class:"flex items-center gap-2"},Ve={class:"cryptocurrency-item-amount"};function Oe(e,s,h,_,y,f){const c=r("feather-icon");return n(),i("div",null,[t("div",Le,o(e.$t("Choose your cryptocurrency")),1),t("div",Ae,[t("label",Te,[d(c,{type:"search",size:"18",class:"search-icon"})]),P(t("input",{id:"search",class:"outline-none h-24px w-full text-center","onUpdate:modelValue":s[0]||(s[0]=a=>e.searchValue=a),type:"text",placeholder:e.$t("Search cryptocurrency")},null,8,He),[[x,e.searchValue]])]),t("div",xe,[(n(!0),i(S,null,D(e.searchedCryptocurrency,(a,p)=>(n(),i("div",{key:p,"aria-hidden":"true",class:$(["cryptocurrency-item",{"cryptocurrency-item-selected":e.selectedCryptocurrency.symbol===a.symbol}]),onClick:l=>e.selectHandler(a.symbol,a.value)},[t("div",Ue,[t("img",{class:"w-36px",src:e.image(`${a.symbol}.svg`),alt:a.symbol},null,8,Fe),t("div",Ne,[t("span",ze,o(a.currency),1),t("span",qe,o(`${a.rate} USD`),1)])]),t("div",Be,[t("span",Ve,o(`~ ${a.amount} ${a.symbol}`),1)])],10,Me))),128))])])}const Ee=v(Pe,[["render",Oe],["__scopeId","data-v-03f6125b"]]),je=m({data(){return{searchValue:""}},computed:{...w("invoice",{invoiceAddresses:"invoiceAddresses",selectedCryptocurrency:"selectedCryptocurrency",selectedNetwork:"selectedNetwork"}),networkOptions(){return this.invoiceAddresses.filter(e=>e.currency.split(".")[0]==="USDT").map(e=>({title:e.blockchain==="tron"?`TRC20 (${e.currency.split(".")[0]})`:e.blockchain==="eth"?`ERC20 (${e.currency.split(".")[0]})`:"?",value:e.currency,blockchain:e.currency.split(".")[1]}))},searchedNetwork(){return this.networkOptions.filter(e=>e.title.toLowerCase().includes(this.searchValue.toLowerCase()))}},created(){this.setSelectedNetwork({symbol:"",value:""})},methods:{...k("invoice",["setSelectedNetwork"]),image:M,selectHandler(e,s){this.setSelectedNetwork({blockchain:e,value:s})}}});const Ke={class:"title mb-15px flex items-center gap-2 justify-center"},Re=["src","alt"],We={class:"input-wrapper mb-20px"},Qe={for:"search"},Ge=["placeholder"],Xe={class:"flex flex-col gap-15px"},Ye=["onClick"],Je=["src","alt"],Ze={class:"text-base"};function et(e,s,h,_,y,f){const c=r("feather-icon");return n(),i("div",null,[t("div",Ke,[t("span",null,o(e.$t("Select a network of")),1),e.selectedCryptocurrency.symbol?(n(),i("img",{key:0,class:"w-24px",src:e.image(`${e.selectedCryptocurrency.symbol}.svg`),alt:e.selectedCryptocurrency.symbol},null,8,Re)):u("",!0)]),t("div",We,[t("label",Qe,[d(c,{type:"search",size:"18",class:"search-icon"})]),P(t("input",{id:"search",class:"outline-none h-24px w-full text-center","onUpdate:modelValue":s[0]||(s[0]=a=>e.searchValue=a),type:"text",placeholder:e.$t("Search network")},null,8,Ge),[[x,e.searchValue]])]),t("div",Xe,[(n(!0),i(S,null,D(e.searchedNetwork,(a,p)=>(n(),i("div",{key:p,"aria-hidden":"true",class:$(["network-item",{"network-item-selected":e.selectedNetwork.blockchain===a.blockchain}]),onClick:l=>e.selectHandler(a.blockchain,a.value)},[t("img",{class:"w-36px",src:e.image(`${e.selectedCryptocurrency.symbol}.svg`),alt:a.symbol},null,8,Je),t("span",Ze,o(a.title),1)],10,Ye))),128))])])}const tt=v(je,[["render",et],["__scopeId","data-v-22dfc1a1"]]),st=m({components:{UiQrCodeNew:O,UiCopyToClipboard:q,UiLoading:E,UiButtonLoading:N},data(){return{emailInput:"",emailLoading:!1,showAddressBtnLoading:!1,qrKey:1}},computed:{...w("invoice",{invoice:"invoice",invoiceAddresses:"invoiceAddresses",selectedCurrency:"selectedCryptocurrencyAndNetwork"}),...I("invoice",{selectedFindIndex:"selectedCryptocurrencyIndex"}),qrKeyRerender(){return`${this.qrKey}${this.invoiceAddresses[this.selectedIndex].address}`},invoiceId(){return this.$route.params.invoice_id},selectedIndex(){return this.selectedFindIndex(this.selectedCurrency)},currencySymbol(){return this.invoiceAddresses[this.selectedIndex].currency.split(".")[0]},qrCodeData(){return this.invoiceAddresses[this.selectedIndex].address?this.invoiceAddresses[this.selectedIndex].address:"empty_address"},qrCodeImg(){return this.invoiceAddresses[this.selectedIndex].address?`${this.invoiceAddresses[this.selectedIndex].currency}.svg`:"help-circle.svg"},showConfirmBtn(){return this.invoice.status==="partially_paid"||this.invoice.status==="waiting_confirmations"}},watch:{invoice(){this.syncDataFromVuex()}},created(){this.syncDataFromVuex()},methods:{...T("invoice",["sendInvoiceToEmail","loadInvoiceAddress","loadInvoiceData","confirmInvoice"]),image:M,async showAddressHandler(e){try{this.showAddressBtnLoading=!0,await this.loadInvoiceAddress({invoiceId:this.invoiceId,currencyId:e}),await this.loadInvoiceData(this.invoiceId),this.showAddressBtnLoading=!1,this.qrKey+=1}catch{this.showAddressBtnLoading=!1}},async saveEmailHandler(){try{this.emailLoading=!0,await this.sendInvoiceToEmail({invoiceId:this.invoiceId,payload:{email:this.emailInput}}),this.emailLoading=!1,this.$toast.success(this.$t("Email has been saved"))}catch{this.emailLoading=!1}},setEmail(){this.emailInput||(this.emailInput=this.invoice.payerEmail)},syncDataFromVuex(){this.setEmail()}}});const ot={class:"flex flex-col h-full"},nt={class:"text-center"},it={class:"font-600 text-22px"},at={class:"mt-16px mb-20px relative"},ct={key:0,class:"qr-code-blur"},rt={key:1,class:"show-address-btn rounded-20px relative flex items-center z-100"},dt=["src"],lt={class:"font-600 text-22px"},pt={class:"flex flex-col gap-10px py-15px"},ut={class:"value-wrapper"},ht={class:"label"},_t={class:"value"},mt={class:"value-wrapper"},vt={class:"label"},yt={class:"value"},ft={key:0},$t={class:"flex"},wt=["placeholder"],gt={class:"save-btn",type:"submit"};function kt(e,s,h,_,y,f){const c=r("ui-qr-code-new"),a=r("ui-button-loading"),p=r("ui-copy-to-clipboard"),l=r("feather-icon"),C=r("ui-loading");return n(),i("div",ot,[t("div",nt,[t("div",it,o(e.$t("Pay"))+" "+o(e.invoiceAddresses[e.selectedIndex].amount)+" "+o(e.currencySymbol)+" "+o(e.$t("with QR code")),1),t("div",at,[(n(),g(c,{data:e.qrCodeData,size:232,img:e.qrCodeImg,level:"M",color:"#3f4048",key:e.qrKeyRerender},null,8,["data","img"])),e.invoiceAddresses[e.selectedIndex].address?u("",!0):(n(),i("div",ct)),e.invoiceAddresses[e.selectedIndex].address?u("",!0):(n(),i("div",rt,[t("img",{class:"w-40px absolute left-0 z-101",src:e.image(`${e.invoiceAddresses[e.selectedIndex].currency}.svg`),alt:"crypto-icon"},null,8,dt),d(a,{class:"text-white font-600 bg-dark-gray h-40px pl-12 pr-3 !rounded-20px whitespace-nowrap",loading:e.showAddressBtnLoading,onClick:s[0]||(s[0]=b=>e.showAddressHandler(e.invoiceAddresses[e.selectedIndex].currency))},{default:L(()=>[F(o(e.$t("Show Address")),1)]),_:1},8,["loading"])]))]),t("div",lt,o(e.$t("Or copy the values from these fields")),1)]),t("div",pt,[t("div",ut,[t("div",ht,o(e.$t("amount")),1),t("div",_t,o(e.invoiceAddresses[e.selectedIndex].amount)+" "+o(e.currencySymbol),1),d(p,{class:"copy-icon",size:"22","text-to-copy":e.invoiceAddresses[e.selectedIndex].amount},null,8,["text-to-copy"])]),t("div",mt,[t("div",vt,o(e.$t("address")),1),t("div",yt,[e.invoiceAddresses[e.selectedIndex].address?(n(),i("span",ft,o(`${e.invoiceAddresses[e.selectedIndex].address.slice(0,7)}
                ...${e.invoiceAddresses[e.selectedIndex].address.slice(-7)}`),1)):(n(),i(S,{key:1},D(14,b=>t("span",{key:b,class:"text-8px"},"â—")),64))]),d(p,{class:"copy-icon",size:"22","text-to-copy":e.invoiceAddresses[e.selectedIndex].address?e.invoiceAddresses[e.selectedIndex].address:" "},null,8,["text-to-copy"])])]),t("form",{onSubmit:s[2]||(s[2]=A((...b)=>e.saveEmailHandler&&e.saveEmailHandler(...b),["prevent"])),class:"email-input mt-auto relative"},[t("div",$t,[d(l,{class:"help-icon",type:"help-circle",size:"20"})]),P(t("input",{required:"",type:"email","onUpdate:modelValue":s[1]||(s[1]=b=>e.emailInput=b),placeholder:e.$t("Your e-mail"),class:"outline-none w-full"},null,8,wt),[[x,e.emailInput]]),t("button",gt,o(e.$t("Save")),1),d(C,{class:"!rounded-48px",size:"24",loading:e.emailLoading},null,8,["loading"])],32)])}const bt=v(st,[["render",kt],["__scopeId","data-v-8df32da4"]]),Ct=m({components:{ChooseCryptocurrency:Ee,SelectNetwork:tt,InvoiceData:bt},computed:{...w("invoice",{step:"stepPayment"})}});function It(e,s,h,_,y,f){const c=r("choose-cryptocurrency"),a=r("select-network"),p=r("invoice-data");return n(),i(S,null,[e.step===1?(n(),g(c,{key:0})):u("",!0),e.step===2?(n(),g(a,{key:1})):u("",!0),e.step===3?(n(),g(p,{key:2})):u("",!0)],64)}const St=v(Ct,[["render",It]]),Dt=m({});const Pt={class:"bg-s-gray"},Lt={class:"title mb-4"},At={class:"flex flex-col gap-10px"},Tt={class:"item"},Ht={class:"item-title"},xt={class:"item-text"},Mt={class:"item"},Ut={class:"item-title"},Ft={class:"item-text"},Nt={class:"item"},zt={class:"item-title"},qt={class:"item-text"};function Bt(e,s,h,_,y,f){return n(),i("div",Pt,[t("div",Lt,o(e.$t("How to pay")),1),t("div",At,[t("div",Tt,[t("div",Ht," 1. "+o(e.$t("how_to_pay_1_title")),1),t("div",xt,o(e.$t("how_to_pay_1_text")),1)]),t("div",Mt,[t("div",Ut," 2. "+o(e.$t("how_to_pay_2_title")),1),t("div",Ft,o(e.$t("how_to_pay_2_text")),1)]),t("div",Nt,[t("div",zt," 3. "+o(e.$t("how_to_pay_3_title")),1),t("div",qt,o(e.$t("how_to_pay_3_text")),1)])])])}const Vt=v(Dt,[["render",Bt],["__scopeId","data-v-0fff268d"]]),Ot=m({components:{UiExpand:j},data(){return{fieldsCollaps:{}}},computed:{fieldCollaps(){return e=>this.fieldsCollaps[e]}},methods:{expand(e){this.fieldsCollaps={...this.fieldsCollaps,[e]:!this.fieldsCollaps[e]}}}});const Et={class:"bg-s-gray h-full"},jt={class:"title mb-4"},Kt={class:"accordion-list"},Rt={class:"accordion-item-text"},Wt={class:"accordion-item-text"},Qt={class:"accordion-item-text"};function Gt(e,s,h,_,y,f){const c=r("feather-icon"),a=r("ui-expand");return n(),i("div",Et,[t("div",jt,o(e.$t("FAQ")),1),t("ul",Kt,[t("li",{class:$(["accordion-item",{"bg-white":e.fieldCollaps(1)}])},[t("div",{"aria-hidden":"true",class:$(["accordion-item-title !border-none",{"accordion-item-title-color":e.fieldCollaps(1)}]),onClick:s[0]||(s[0]=p=>e.expand(1))},[t("span",null,o(e.$t("faq_1_question")),1),d(c,{type:"chevron-down",size:"18",class:$({rotate:e.fieldCollaps(1)})},null,8,["class"])],2),d(a,{"is-expanded":e.fieldCollaps(1)},{default:L(()=>[t("div",Rt,o(e.$t("faq_1_answer")),1)]),_:1},8,["is-expanded"])],2),t("li",{class:$(["accordion-item",{"bg-white":e.fieldCollaps(2)}])},[t("div",{"aria-hidden":"true",class:$(["accordion-item-title",{"accordion-item-title-color":e.fieldCollaps(2)}]),onClick:s[1]||(s[1]=p=>e.expand(2))},[t("span",null,o(e.$t("faq_2_question")),1),d(c,{type:"chevron-down",size:"18",class:$({rotate:e.fieldCollaps(2)})},null,8,["class"])],2),d(a,{"is-expanded":e.fieldCollaps(2)},{default:L(()=>[t("div",Wt,o(e.$t("faq_2_answer")),1)]),_:1},8,["is-expanded"])],2),t("li",{class:$(["accordion-item",{"bg-white":e.fieldCollaps(3)}])},[t("div",{"aria-hidden":"true",class:$(["accordion-item-title",{"accordion-item-title-color":e.fieldCollaps(3)}]),onClick:s[2]||(s[2]=p=>e.expand(3))},[t("span",null,o(e.$t("faq_3_question")),1),d(c,{type:"chevron-down",size:"18",class:$({rotate:e.fieldCollaps(3)})},null,8,["class"])],2),d(a,{"is-expanded":e.fieldCollaps(3)},{default:L(()=>[t("div",Qt,o(e.$t("faq_3_answer")),1)]),_:1},8,["is-expanded"])],2)])])}const Xt=v(Ot,[["render",Gt],["__scopeId","data-v-e085800b"]]),Yt=m({computed:{...w("invoice",{invoice:"invoice",invoiceMsgStatus:"invoiceMsgStatus"}),isCheck(){return this.invoice.status==="paid"||this.invoice.status==="overpaid"||this.invoice.status==="success"},isXmark(){return this.invoice.status==="expired"||this.invoice.status==="partially_paid_expired"}}});const Jt={class:"flex items-center justify-center h-full w-full"},Zt={class:"flex flex-col gap-10px text-center"},es={class:"text-dark-gray text-22px font-600"},ts={key:0,class:"icon-wrapper mx-auto mt-12px"},ss={key:1,class:"icon-wrapper mx-auto mt-12px"};function os(e,s,h,_,y,f){const c=r("feather-icon");return n(),i("div",Jt,[t("div",Zt,[t("div",es,o(e.$t(e.invoiceMsgStatus.text)),1),e.isCheck?(n(),i("div",ts,[d(c,{type:"check",size:"80"})])):u("",!0),e.isXmark?(n(),i("div",ss,[d(c,{type:"x",size:"80"})])):u("",!0)])])}const ns=v(Yt,[["render",os],["__scopeId","data-v-12b8e108"]]),is=m({components:{PaymentPage:St,HowItWorksPage:Vt,FaqPage:Xt,PaymentStatusCase:ns},computed:{...w("invoice",{currentPage:"currentPage",invoiceMsgStatus:"invoiceMsgStatus"})}});const as={key:3,class:"status-case-wrapper z-8"};function cs(e,s,h,_,y,f){const c=r("payment-page"),a=r("how-it-works-page"),p=r("faq-page"),l=r("payment-status-case");return n(),i("div",{class:$(["pages relative",[e.currentPage===1?"min-h-560px":"h-560px overflow-auto"]])},[e.currentPage===1?(n(),g(c,{key:0})):u("",!0),e.currentPage===2?(n(),g(a,{key:1,class:"relative z-9"})):u("",!0),e.currentPage===3?(n(),g(p,{key:2,class:"relative z-9"})):u("",!0),e.invoiceMsgStatus.formHide?(n(),i("div",as,[d(l)])):u("",!0)],2)}const rs=v(is,[["render",cs],["__scopeId","data-v-cf82c658"]]),ds=m({components:{PaymentFormLocale:z},data(){return{isShowLocaleSelectDropdown:!1}},computed:{...w("app",{localeOptions:"localeOptions"}),...I("app",{selectedLocaleOption:"selectedLocaleOption"}),...w("invoice",{step:"stepPayment",page:"currentPage",selectedCryptocurrency:"selectedCryptocurrency",selectedNetwork:"selectedNetwork",invoiceAddresses:"invoiceAddresses",selectedCurrency:"selectedCryptocurrencyAndNetwork"}),...I("invoice",{selectedFindIndex:"selectedCryptocurrencyIndex"}),disabledNext(){return this.step===1?!this.selectedCryptocurrency.symbol:this.step===2?!this.selectedNetwork.blockchain:!0},selectedIndex(){return this.selectedFindIndex(this.selectedCurrency)},transactions(){var e;return(e=this.invoiceAddresses[this.selectedIndex])!=null&&e.transactions?this.invoiceAddresses[this.selectedIndex].transactions:[]}},methods:{...k("app",["setLocale"]),...k("invoice",["setStepPayment","setCurrentPage","setSelectedCryptocurrencyAndNetwork","setIsShowPaymentDetails"]),nextStepHandler(){this.selectedCryptocurrency.symbol==="USDT"?this.setStepPayment(this.step+1):this.setStepPayment(3),this.setSelectedCryptocurrencyAndNetwork(`${this.selectedCryptocurrency.symbol}.${this.selectedNetwork.blockchain}`)},backHandler(){this.selectedCryptocurrency.symbol==="USDT"?this.setStepPayment(this.step-1):this.setStepPayment(1)},backToPaymentHandler(){this.setCurrentPage(1)},paymentDetailsHandler(){this.setIsShowPaymentDetails(!0)},showDropdownMenu(){this.isShowLocaleSelectDropdown=!this.isShowLocaleSelectDropdown},closeLocaleSelectDropdown(){this.isShowLocaleSelectDropdown=!1},changeLocaleHandler(e){this.setLocale(e),this.$i18n.locale=e}}});const ls={class:"font-600"},ps=["disabled"],us={class:"font-600"},hs={class:"font-600"},_s={key:0,class:"payment-details-counter"},ms={class:"font-600"},vs={class:"language"},ys={class:"font-600"};function fs(e,s,h,_,y,f){const c=r("feather-icon"),a=r("payment-form-locale"),p=H("click-out");return n(),i("div",null,[t("div",{class:$(["grid gap-2 items-center",{"buttons-wrapper-2":e.step===1&&e.page===1||e.page!==1,"buttons-wrapper-3":e.step!==1&&e.page===1}])},[e.step!==1&&e.page===1?(n(),i("button",{key:0,class:"back-step",onClick:s[0]||(s[0]=(...l)=>e.backHandler&&e.backHandler(...l))},[d(c,{type:"arrow-left",size:"18"}),t("span",ls,o(e.$t("Back")),1)])):u("",!0),e.page===1&&e.step!==3?(n(),i("button",{key:1,class:"next-step",disabled:e.disabledNext,onClick:s[1]||(s[1]=(...l)=>e.nextStepHandler&&e.nextStepHandler(...l))},[t("span",us,o(e.$t("Next step")),1),d(c,{type:"arrow-right",size:"18"})],8,ps)):u("",!0),e.page===1&&e.step===3?(n(),i("button",{key:2,class:"payment-details-btn relative",onClick:s[2]||(s[2]=A((...l)=>e.paymentDetailsHandler&&e.paymentDetailsHandler(...l),["stop"]))},[t("span",hs,o(e.$t("Payment details")),1),e.transactions.length?(n(),i("span",_s," +"+o(e.transactions.length),1)):u("",!0)])):u("",!0),e.page!==1?(n(),i("button",{key:3,class:"back-to-payment",onClick:s[3]||(s[3]=(...l)=>e.backToPaymentHandler&&e.backToPaymentHandler(...l))},[d(c,{type:"arrow-left",size:"18"}),t("span",ms,o(e.$t("Back to payment")),1)])):u("",!0),P((n(),i("div",{"aria-hidden":"true",class:"cursor-pointer relative z-99 language-btn",onClick:s[4]||(s[4]=(...l)=>e.showDropdownMenu&&e.showDropdownMenu(...l))},[t("div",vs,[t("span",ys,o(e.selectedLocaleOption.title),1),d(c,{type:"chevron-down",size:"18"})]),e.isShowLocaleSelectDropdown?(n(),g(a,{key:0,"selected-locale":e.selectedLocaleOption,"locale-options":e.localeOptions,onChangeLocale:e.changeLocaleHandler,onCloseLocaleSelectDropdown:e.closeLocaleSelectDropdown},null,8,["selected-locale","locale-options","onChangeLocale","onCloseLocaleSelectDropdown"])):u("",!0)])),[[p,e.closeLocaleSelectDropdown]])],2)])}const $s=v(ds,[["render",fs],["__scopeId","data-v-3191adc2"]]),ws=m({components:{PaymentFormLocale:z},data(){return{isShowLocaleSelectDropdown:!1}},computed:{...w("app",{localeOptions:"localeOptions"}),...I("app",{selectedLocaleOption:"selectedLocaleOption"}),...I("invoice",{transactions:"allTransactions"})},methods:{...k("app",["setLocale"]),...k("invoice",["setIsShowPaymentDetails"]),paymentDetailsHandler(){this.setIsShowPaymentDetails(!0)},showDropdownMenu(){this.isShowLocaleSelectDropdown=!this.isShowLocaleSelectDropdown},closeLocaleSelectDropdown(){this.isShowLocaleSelectDropdown=!1},changeLocaleHandler(e){this.setLocale(e),this.$i18n.locale=e}}});const gs={class:"grid gap-2 items-center buttons-wrapper-3"},ks={class:"order-details font-600 h-40px"},bs={class:"font-600"},Cs={key:0,class:"payment-details-counter"},Is={class:"language"},Ss={class:"font-600"};function Ds(e,s,h,_,y,f){const c=r("feather-icon"),a=r("payment-form-locale"),p=H("click-out");return n(),i("div",null,[t("div",gs,[t("button",ks,o(e.$t("Order details")),1),t("button",{class:"payment-details-btn relative",onClick:s[0]||(s[0]=A((...l)=>e.paymentDetailsHandler&&e.paymentDetailsHandler(...l),["stop"]))},[t("span",bs,o(e.$t("Payment details")),1),e.transactions.length?(n(),i("span",Cs," +"+o(e.transactions.length),1)):u("",!0)]),P((n(),i("div",{"aria-hidden":"true",class:"cursor-pointer relative z-99 language-btn",onClick:s[1]||(s[1]=(...l)=>e.showDropdownMenu&&e.showDropdownMenu(...l))},[t("div",Is,[t("span",Ss,o(e.selectedLocaleOption.title),1),d(c,{type:"chevron-down",size:"18"})]),e.isShowLocaleSelectDropdown?(n(),g(a,{key:0,"selected-locale":e.selectedLocaleOption,"locale-options":e.localeOptions,onChangeLocale:e.changeLocaleHandler,onCloseLocaleSelectDropdown:e.closeLocaleSelectDropdown},null,8,["selected-locale","locale-options","onChangeLocale","onCloseLocaleSelectDropdown"])):u("",!0)])),[[p,e.closeLocaleSelectDropdown]])])])}const Ps=v(ws,[["render",Ds],["__scopeId","data-v-98d65f8a"]]),Ls=m({});const As={class:"footer"},Ts={class:"text-base text-center"},Hs={class:"text-md-gray"};function xs(e,s,h,_,y,f){return n(),i("div",As,[t("div",Ts,[t("span",Hs,o(e.$t("Powered by"))+" DV Pay ",1)])])}const Ms=v(Ls,[["render",xs],["__scopeId","data-v-a4c75a38"]]),Us=m({components:{UiCopyToClipboard:q},computed:{...w("invoice",{invoiceAddresses:"invoiceAddresses",selectedCurrency:"selectedCryptocurrencyAndNetwork",invoiceMsgStatus:"invoiceMsgStatus"}),...I("invoice",{selectedFindIndex:"selectedCryptocurrencyIndex",allTransactions:"allTransactions"}),selectedIndex(){return this.selectedFindIndex(this.selectedCurrency)},transactions(){var e;return(e=this.invoiceAddresses[this.selectedIndex])!=null&&e.transactions?this.invoiceAddresses[this.selectedIndex].transactions:[]}},methods:{...k("invoice",["setIsShowPaymentDetails"]),closePaymentDetailsHandler(){this.setIsShowPaymentDetails(!1)}}});const Fs={class:"wrapper"},Ns={class:"title"},zs={class:"flex flex-col gap-10px h-full"},qs={class:"sub-title"},Bs={key:0,class:"details"},Vs={key:0,class:"flex flex-col gap-10px"},Os={class:"font-600"},Es={class:"flex items-center gap-2"},js=["href"],Ks={key:1,class:"text-center"},Rs={key:1,class:"details"},Ws={key:0,class:"flex flex-col gap-10px"},Qs={class:"font-600"},Gs={class:"flex items-center gap-2"},Xs=["href"],Ys={key:1,class:"text-center"},Js={class:"flex justify-center"},Zs={class:"font-600"};function eo(e,s,h,_,y,f){const c=r("ui-copy-to-clipboard");return n(),i("div",Fs,[t("div",Ns,o(e.$t("Payment details")),1),t("div",zs,[t("div",qs,o(e.$t("Transactions")),1),e.invoiceMsgStatus.formHide?(n(),i("div",Rs,[e.allTransactions.length?(n(),i("div",Ws,[(n(!0),i(S,null,D(e.allTransactions,(a,p)=>(n(),i("div",{key:p,class:"details-item"},[t("div",Qs,o(e.$t("Tx Hash"))+":",1),t("div",Gs,[t("a",{href:a.linkToExplorer,class:"underline hover:opacity-80",target:"_blank",ref_for:!0,ref:"noopener noreferrer"},o(`${a.txId.slice(0,7)}...${a.txId.slice(-7)}`),9,Xs),d(c,{"text-to-copy":a.txId},null,8,["text-to-copy"])])]))),128))])):(n(),i("div",Ys,o(e.$t("There are no payment transactions.")),1))])):(n(),i("div",Bs,[e.transactions.length?(n(),i("div",Vs,[(n(!0),i(S,null,D(e.transactions,(a,p)=>(n(),i("div",{key:p,class:"details-item"},[t("div",Os,o(e.$t("Tx Hash"))+":",1),t("div",Es,[t("a",{href:a.linkToExplorer,class:"underline hover:opacity-80",target:"_blank",ref_for:!0,ref:"noopener noreferrer"},o(`${a.txId.slice(0,7)}...${a.txId.slice(-7)}`),9,js),d(c,{"text-to-copy":a.txId},null,8,["text-to-copy"])])]))),128))])):(n(),i("div",Ks,o(e.$t("There are no payment transactions.")),1))]))]),t("div",Js,[t("button",{class:"close-btn",onClick:s[0]||(s[0]=(...a)=>e.closePaymentDetailsHandler&&e.closePaymentDetailsHandler(...a))},[t("span",Zs,o(e.$t("Close payment details")),1)])])])}const to=v(Us,[["render",eo],["__scopeId","data-v-8d1f64b6"]]),so=m({components:{PaymentFormHeader:$e,PaymentFormInvoiceId:De,PaymentFormPages:rs,PaymentFormNavButtons:$s,PaymentFormNavButtonsHide:Ps,PaymentFormFooter:Ms,PaymentDetails:to,UiSkeletonBox:K},data(){return{invoiceUpdateTimer:0,isInvoiceWatch:!1,count:1}},computed:{...w("invoice",{invoice:"invoice",invoiceMsgStatus:"invoiceMsgStatus",invoiceAddresses:"invoiceAddresses",loading:"loading",isShowPaymentDetails:"isShowPaymentDetails",page:"currentPage"}),invoiceId(){return this.$route.params.invoice_id}},watch:{invoice(){this.pollingInvoiceData(),this.setActiveCurrency(),this.redirectToSuccessUrl(),this.isInvoiceWatch=!0}},beforeMount(){this.loadInvoiceData(this.invoiceId),this.setLoading(!0)},beforeUnmount(){clearTimeout(this.invoiceUpdateTimer),this.clearInvoiceData()},methods:{...k("invoice",["clearInvoiceData","setLoading","setIsShowPaymentDetails","setSelectedCryptocurrency","setSelectedNetwork","setSelectedCryptocurrencyAndNetwork","setStepPayment"]),...T("invoice",["loadInvoice","loadInvoiceData"]),redirectToSuccessUrl(){if((this.invoice.status==="paid"||this.invoice.status==="overpaid"||this.invoice.status==="success")&&this.count!==1&&this.invoice.successUrl){const e=document.createElement("a");e.href=this.invoice.successUrl,e.click()}this.count+=1},pollingInvoiceData(){this.invoiceUpdateTimer=setTimeout(()=>{this.invoice.status==="waiting"||this.invoice.status==="partially_paid"||this.invoice.status==="waiting_confirmations"?(clearTimeout(this.invoiceUpdateTimer),this.loadInvoice(this.invoiceId)):clearTimeout(this.invoiceUpdateTimer)},"10"*1e3)},closePaymentDetailsHandler(){this.setIsShowPaymentDetails(!1)},setActiveCurrency(){if(!this.isInvoiceWatch&&this.invoice.paymentMethod){const e=this.invoice.paymentMethod.split(".")[0],s=this.invoice.paymentMethod.split(".")[1];this.setSelectedCryptocurrency({symbol:e,value:this.invoice.paymentMethod}),this.setSelectedNetwork({blockchain:s,value:this.invoice.paymentMethod}),this.setSelectedCryptocurrencyAndNetwork(this.invoice.paymentMethod),this.setStepPayment(3)}}}});const oo={class:"invoice relative"},no={class:"body relative"},io={class:"body-content"},ao={key:0,class:"w-full h-full left-0 top-0 border-x-gray rounded-20px overflow-hidden"},co={key:3,class:"disabled-store"};function ro(e,s,h,_,y,f){const c=r("payment-form-header"),a=r("payment-form-invoice-id"),p=r("ui-skeleton-box"),l=r("payment-form-pages"),C=r("payment-form-nav-buttons-hide"),b=r("payment-form-nav-buttons"),U=r("payment-form-footer"),B=r("payment-details");return n(),i("div",oo,[d(c),t("div",no,[e.invoiceMsgStatus.formHide?u("",!0):(n(),g(a,{key:0})),t("div",io,[e.loading?(n(),i("div",ao,[d(p,{height:"560px",width:"100%"})])):(n(),g(l,{key:1}))]),e.invoiceMsgStatus.formHide&&e.page===1?(n(),g(C,{key:1})):(n(),g(b,{key:2})),e.invoice.storeStatus===0?(n(),i("div",co,o(e.$t("payments_suspended_text")),1)):u("",!0)]),d(U),t("div",{"aria-hidden":"true",class:$(["payment-details-backdrop z-100",{"payment-details-show":e.isShowPaymentDetails}]),onClick:s[0]||(s[0]=(...V)=>e.closePaymentDetailsHandler&&e.closePaymentDetailsHandler(...V))},null,2),t("div",{"aria-hidden":"true",ref:"paymentDetails",class:$(["payment-details-wrapper z-101",{"payment-details-show":e.isShowPaymentDetails}]),onClick:s[1]||(s[1]=A(()=>{},["stop"]))},[d(B),d(U)],2)])}const fo=v(so,[["render",ro],["__scopeId","data-v-ef10ba0e"]]);export{fo as default};
