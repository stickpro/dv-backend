import{d as b,f,m as w,k as P,g as $,_ as D,r as n,o as l,c as u,a,t as o,e as r,w as i,l as x,i as d,h as v,n as C,j as _}from"./flag-icons.min-86ec5348.js";import{U as V}from"./UiTable-55d04511.js";import{U as S}from"./UiCopyToClipboard-54d0ebb6.js";import{U as k}from"./UiInput-de72e1ee.js";import"./UiSelect-ea4bca5c.js";import"./UiPagination-4e2c3226.js";import"./UiLoading-237702fa.js";const A=b({components:{UiTable:V,UiCopyToClipboard:S,UiInput:k},data(){return{tableColumns:[{label:"Date",field:"createdAt",textAlign:"text-left"},{label:"Store",field:"storeName",textAlign:"text-left"},{label:"Order Id",field:"orderId",textAlign:"text-left"},{label:"Invoice Id",field:"id",textAlign:"text-left"},{label:"Status",field:"status",textAlign:"text-center"},{label:"Amount",field:"amount",textAlign:"text-center"},{label:"Actions",field:"actions",textAlign:"text-right"}],searchValue:"",currentPage:"1",perPageDefault:"25",sortField:"",sortDirection:"desc",loading:!1}},computed:{...f("invoices",{pagination:"pagination"}),...w("invoices",{invoices:"getInvoices"}),...f("stores",["storeFilterTrigger"])},watch:{async storeFilterTrigger(){this.loading=!0,this.setStoreFilterBtnLoading(!0),await this.loadInvoicesData(this.currentPage,this.perPageDefault),this.setStoreFilterBtnLoading(!1)}},async created(){this.invoices.length&&this.$store.commit("app/setProgressBar","stop"),await this.loadInvoicesData(this.currentPage,this.perPageDefault),this.$store.commit("app/setProgressBar","stop")},methods:{async searchInvoice(){this.currentPage="1",this.sortField="",this.sortDirection="desc",await this.$router.replace({name:this.$route.name,query:this.searchValue?{query:this.searchValue}:{}}),this.loading=!0,await this.loadInvoicesData(this.currentPage,this.perPageDefault)},perPageSelectHandler(t,s){this.loading=!0,this.loadInvoicesData(t,s)},pageChangeHandler(t,s){this.loading=!0,this.loadInvoicesData(t,s)},async loadInvoicesData(t,s){const p=this.$route.query.query;this.searchValue=p;try{const c={page:t,perPage:s,query:p?this.searchValue:"",sortDirection:this.sortDirection};this.sortField&&(c.sortField=this.sortField),await this.loadInvoices(c),this.loading=!1,this.$store.commit("app/setProgressBar","stop")}catch{this.loading=!1,this.$store.commit("app/setProgressBar","stop")}},...P("invoices",["loadInvoices"]),...$("stores",["setStoreFilterBtnLoading"])}});const B={class:"mb-6"},F={class:"flex items-center justify-between gap-2"},U={class:"page-title"},q={class:"search-group"},N={class:"button button-search",type:"submit"},T={key:0,class:"card"},H={class:"flex items-center gap-2"},z={class:"flex items-center gap-2"},L={class:"table-actions"},j=["href"];function M(t,s,p,c,O,E){const h=n("feather-icon"),g=n("router-link"),y=n("ui-input"),m=n("ui-copy-to-clipboard"),I=n("ui-table");return l(),u("div",null,[a("div",B,[a("div",F,[a("div",U,o(t.$t("Invoices")),1),r(g,{class:"button button-primary px-6 py-3 flex items-center gap-1",to:{name:"invoice-create"}},{default:i(()=>[r(h,{type:"plus",size:"16","stroke-width":"3"}),a("span",null,o(t.$t("Create Invoice")),1)]),_:1})])]),a("form",{class:"mb-6",onSubmit:s[1]||(s[1]=x((...e)=>t.searchInvoice&&t.searchInvoice(...e),["prevent"]))},[a("div",q,[r(y,{modelValue:t.searchValue,"onUpdate:modelValue":s[0]||(s[0]=e=>t.searchValue=e),type:"text",class:"input-search",placeholder:t.$t("Search by Order Id / Invoice Id")},null,8,["modelValue","placeholder"]),a("button",N,[r(h,{type:"search",size:"16"}),a("span",null,o(t.$t("Search")),1)])])],32),t.invoices.length?(l(),u("div",T,[r(I,{columns:t.tableColumns,data:t.invoices,paginationable:"",loading:t.loading,"per-page-default":t.perPageDefault,"total-entries":t.pagination.total,onPerPageSelectChanged:t.perPageSelectHandler,onPageChanged:t.pageChangeHandler},{"cell-orderId":i(({row:e})=>[a("div",H,[a("span",null,o(e.orderId),1),e.orderId?(l(),v(m,{key:0,"text-to-copy":e.orderId},null,8,["text-to-copy"])):d("",!0)])]),"cell-id":i(({row:e})=>[a("div",z,[a("span",null,o(e.id),1),e.id?(l(),v(m,{key:0,"text-to-copy":e.id},null,8,["text-to-copy"])):d("",!0)])]),"cell-status":i(({row:e})=>[a("span",{class:C({"waiting-status":e.status==="waiting"||e.status==="partially_paid"||e.status==="waiting_confirmations","success-status":e.status==="paid"||e.status==="overpaid"||e.status==="success","error-status":e.status==="expired"||e.status==="partially_paid_expired"||e.status==="cancelled"})},o(t.$t(e.status)),3)]),"cell-amount":i(({row:e})=>[_(o(e.amount)+" ("+o(e.currency)+") ",1)]),"cell-actions":i(({row:e})=>[a("div",L,[e.status==="waiting"||e.status==="partially_paid"||e.status==="waiting_confirmations"?(l(),u("a",{key:0,href:`/invoices/${e.id}`,class:"cursor-pointer text-primary-500 hover:text-primary-600"},o(t.$t("Checkout")),9,j)):d("",!0),r(g,{class:"cursor-pointer text-primary-500 hover:text-primary-600",to:{name:"invoice-details",params:{invoice_id:e.id}}},{default:i(()=>[_(o(t.$t("Details")),1)]),_:2},1032,["to"])])]),_:1},8,["columns","data","loading","per-page-default","total-entries","onPerPageSelectChanged","onPageChanged"])])):d("",!0)])}const Y=D(A,[["render",M],["__scopeId","data-v-0fa8e630"]]);export{Y as default};
