import{d as f,k as d,_ as w,r as m,o as c,c as g,a,t as s,l as h,e as n,w as i,j as l}from"./flag-icons.min-86ec5348.js";import{U as b}from"./UiButtonLoading-8a0e711d.js";import{U as y}from"./UiInput-de72e1ee.js";const $=f({components:{UiButtonLoading:b,UiInput:y},data(){return{email:"",password:"",buttonLoading:!1,twoFaEnabled:!1,twoFaCode:""}},methods:{async login(){try{this.buttonLoading=!0;const e={email:this.email,password:this.password};this.twoFaCode&&(e.googleCode=this.twoFaCode),await this.loginUser(e),await this.loadStores(),await this.loadUserInfo(),this.buttonLoading=!1,this.$router.push({name:"dashboard"})}catch(e){this.buttonLoading=!1,e.message==="twofa"&&(this.twoFaEnabled=!0)}},...d("auth",["loginUser"]),...d("stores",["loadStores"]),...d("user",["loadUserInfo"])}}),V={key:0,class:"card"},L={class:"text-3xl"},U={class:"mt-1 text-xl text-center"},v={class:"mt-1 mb-4 text-gray-600"},F={class:"flex items-center justify-center pt-4"},k={class:"text-sm"},C={key:1,class:"card"},B={class:"text-xl text-center mb-4"};function E(e,o,S,_,q,I){const r=m("ui-input"),u=m("router-link"),p=m("ui-button-loading");return e.twoFaEnabled?(c(),g("div",C,[a("h3",B,s(e.$t("Two-Factor Authentication")),1),a("form",{onSubmit:o[4]||(o[4]=h((...t)=>e.login&&e.login(...t),["prevent"]))},[n(r,{required:"",modelValue:e.twoFaCode,"onUpdate:modelValue":o[3]||(o[3]=t=>e.twoFaCode=t),class:"my-2",type:"number",placeholder:e.$t("Verification code"),name:"code"},null,8,["modelValue","placeholder"]),n(p,{class:"button button-primary w-full my-4 p-2",type:"submit",loading:e.buttonLoading},{default:i(()=>[l(s(e.$t("Login")),1)]),_:1},8,["loading"])],32)])):(c(),g("div",V,[a("div",null,[a("h2",L,s(e.$t("Merchant")),1),a("h3",U,s(e.$t("Welcome Back")),1),a("p",v,s(e.$t("Login or create account")),1),a("form",{onSubmit:o[2]||(o[2]=h((...t)=>e.login&&e.login(...t),["prevent"]))},[n(r,{required:"",modelValue:e.email,"onUpdate:modelValue":o[0]||(o[0]=t=>e.email=t),class:"mb-6",type:"email",name:"email",placeholder:e.$t("Email")},null,8,["modelValue","placeholder"]),n(r,{required:"",modelValue:e.password,"onUpdate:modelValue":o[1]||(o[1]=t=>e.password=t),class:"mb-6",type:"password",name:"password",placeholder:e.$t("Password")},null,8,["modelValue","placeholder"]),n(u,{to:{name:"reset"},class:"inline-block text-sm cursor-pointer text-primary-500 hover:text-primary-600"},{default:i(()=>[l(s(e.$t("Forgot password?")),1)]),_:1}),n(p,{class:"button button-primary w-full my-4 p-2",type:"submit",loading:e.buttonLoading},{default:i(()=>[l(s(e.$t("Login")),1)]),_:1},8,["loading"])],32)]),a("div",F,[a("span",k,s(e.$t("Don't have an account?")),1),n(u,{to:"/register",class:"mx-2 text-sm text-primary-500 hover:text-primary-600 cursor-pointer"},{default:i(()=>[l(s(e.$t("Register")),1)]),_:1})])]))}const D=w($,[["render",E]]);export{D as default};
