import{d as f,_ as y,r as l,o as t,c as s,a,F as h,q as m,e as p,t as r,i as D,n as $,f as k,m as b,k as L,g as w,h as u}from"./flag-icons.min-86ec5348.js";import{U as B}from"./UiSkeletonBox-7e5f2b59.js";import{U as N}from"./UiSelect-ea4bca5c.js";import{U}from"./UiPagination-4e2c3226.js";import{U as q}from"./UiLoading-237702fa.js";const I=f({components:{UiSelect:N,UiPagination:U,UiLoading:q},props:{data:{type:Array,required:!0},perPageOptions:{type:Array,required:!1,default:()=>[{title:"25",value:"25"},{title:"50",value:"50"},{title:"100",value:"100"},{title:"250",value:"250"}]},perPageDefault:{type:String,required:!1},totalEntries:{type:Number,required:!1},loading:{type:Boolean,required:!1,default:!1},paginationable:{type:Boolean,required:!1,default:!1}},emits:["perPageSelectChanged","pageChanged"],data(){return{perPage:"",currentPage:1}},computed:{statusClass(){return e=>{switch(e){case"up":return"success-status";case"unknown":return"waiting-status";case"down":return"error-status";default:return"waiting-status"}}},perPageComp:{get(){return this.perPage?this.perPage:this.perPageDefault?this.perPageDefault:this.perPageOptions[0].value},set(e){this.perPage=e}},paginationPerPage(){return Number(this.perPageComp)}},methods:{perPageSelectHandler(){this.$emit("perPageSelectChanged",this.currentPage,this.perPageComp)},pageChangeHandler(e){this.currentPage=e,this.$emit("pageChanged",this.currentPage,this.perPageComp)}}});const V={class:"relative"},A={class:"flex flex-col gap-4"},M={class:"flex items-center gap-4 border-b border-gray-300 px-6 font-600 py-3 bg-gray-200"},E={class:"grid gap-2 grid-cols-[170px,1fr] items-center py-2 px-8"},O={class:"break-all"},F={key:0,class:"flex items-center justify-between mt-6"},j={class:"flex items-center gap-2 text-sm"};function z(e,i,n,P,v,_){const d=l("ui-loading"),g=l("ui-select"),S=l("ui-pagination");return t(),s("div",null,[a("div",V,[a("div",A,[(t(!0),s(h,null,m(e.data,(o,C)=>(t(),s("div",{key:C,class:"w-full wrapper"},[a("div",M,[a("div",null,r(o.startAt),1),a("div",{class:$(e.statusClass(o.status))},r(o.status),3)]),(t(!0),s(h,null,m(o.log,(c,H)=>(t(),s("div",{key:H,class:"border-b last:border-b-0"},[a("div",E,[a("div",null,r(c.createdAt),1),a("div",O,r(c.message),1)])]))),128))]))),128))])]),p(d,{loading:e.loading},null,8,["loading"]),e.paginationable?(t(),s("div",F,[a("div",j,[a("span",null,r(e.$t("Show")),1),p(g,{class:"max-w-90px h-38px",modelValue:e.perPageComp,"onUpdate:modelValue":i[0]||(i[0]=o=>e.perPageComp=o),options:e.perPageOptions,onChange:e.perPageSelectHandler},null,8,["modelValue","options","onChange"]),a("span",null,r(e.$t("entries")),1)]),p(S,{current:e.currentPage,total:e.totalEntries,"per-page":e.paginationPerPage,onPageChange:e.pageChangeHandler},null,8,["current","total","per-page","onPageChange"])])):D("",!0)])}const G=y(I,[["render",z],["__scopeId","data-v-7647bc23"]]),T=f({components:{UiSkeletonBox:B,MonitoringServiceLogCards:G},data(){return{skeletonLoading:!1,currentPage:"1",perPageDefault:"25",loading:!1}},computed:{serviceId(){return this.$route.params.service_id},status(){return this.$route.query.status},serviceName(){return this.getStatusHistoryDetailsServiceName(this.serviceId)},...k("monitoring",{pagination:"statusHistoryDetailsLogsPagination",isStatusHistoryDetailsLoaded:"isStatusHistoryDetailsLoaded"}),...b("monitoring",{statusHistoryDetails:"getStatusHistoryDetails",getStatusHistoryDetailsServiceName:"getStatusHistoryDetailsServiceName"})},async created(){this.isStatusHistoryDetailsLoaded||(this.skeletonLoading=!0),this.statusHistoryDetails.length&&this.$store.commit("app/setProgressBar","stop"),await this.loadStatusHistoryData(this.currentPage,this.perPageDefault),this.$store.commit("app/setProgressBar","stop")},unmounted(){this.clearStatusHistoryDetails(),this.setIsStatusHistoryDetailsLoaded(!1)},methods:{perPageSelectHandler(e,i){this.loading=!0,this.loadStatusHistoryData(e,i)},pageChangeHandler(e,i){this.loading=!0,this.loadStatusHistoryData(e,i)},async loadStatusHistoryData(e,i){try{const n={page:e,perPage:i};this.status&&(n.status=this.status),await this.loadStatusHistoryDetails({serviceId:this.serviceId,params:n}),this.loading=!1,this.skeletonLoading=!1,this.$store.commit("app/setProgressBar","stop")}catch{this.loading=!1,this.skeletonLoading=!1,this.$store.commit("app/setProgressBar","stop")}},...L("monitoring",["loadStatusHistoryDetails"]),...w("monitoring",["clearStatusHistoryDetails","setIsStatusHistoryDetailsLoaded"])}}),J={class:"page-title mb-6"},K={key:1},Q={key:1},R={key:1,class:"card text-gray-600"};function W(e,i,n,P,v,_){const d=l("ui-skeleton-box"),g=l("monitoring-service-log-cards");return t(),s("div",null,[a("div",J,[e.skeletonLoading?(t(),u(d,{key:0,width:"100%",height:"32px"})):(t(),s("span",K,r(e.serviceName),1))]),e.skeletonLoading?(t(),u(d,{key:0,width:"100%",height:"97px"})):(t(),s("div",Q,[e.statusHistoryDetails.length?(t(),u(g,{key:0,data:e.statusHistoryDetails,paginationable:"",loading:e.loading,"per-page-default":e.perPageDefault,"total-entries":e.pagination.total,onPerPageSelectChanged:e.perPageSelectHandler,onPageChanged:e.pageChangeHandler},null,8,["data","loading","per-page-default","total-entries","onPerPageSelectChanged","onPageChanged"])):(t(),s("div",R,r(e.$t("There are no logs"))+". ",1))]))])}const te=y(T,[["render",W]]);export{te as default};
