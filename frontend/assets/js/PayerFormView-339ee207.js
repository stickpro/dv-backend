import{d as _,f as h,_ as m,o,c as a,a as t,t as n,g as k,r as c,e as y,v as g,a2 as M,F as C,q as S,n as P,i as d,m as T,k as V,h as w,w as H,j as q,s as B}from"./flag-icons.min-86ec5348.js";import{i as A}from"./image-9977a1bb.js";import{U as F,P as z}from"./PaymentFormLocale-0a7fa924.js";import{U as O}from"./UiCopyToClipboard-54d0ebb6.js";import{U as R}from"./UiButtonLoading-8a0e711d.js";import{U as E}from"./UiSkeletonBox-7e5f2b59.js";const K=_({data(){return{isShowDropdownMenu:!1}},computed:{...h("payer",{payer:"payer"})}});const j={class:"relative z-11"},Q={class:"header"},G={key:0,class:"text-26px text-white"},J={key:1,class:"h-26px w-full"};function W(e,s,u,f,$,v){return o(),a("div",j,[t("div",Q,[e.payer.store.name?(o(),a("div",G,n(e.payer.store.name),1)):(o(),a("div",J))])])}const X=m(K,[["render",W],["__scopeId","data-v-fc69adb1"]]),Y=_({data(){return{searchValue:""}},computed:{...h("payer",{payerCurrencies:"payerCurrencies",selectedCryptocurrency:"selectedCryptocurrency",currencyRate:"rateUsd",currencyAmount:"amount"}),cryptocurrencyOptions(){return this.payerCurrencies.map(e=>{const s=e.split(".")[0];return{currency:s==="USDT"?`Tether (${s})`:`${e.split(".")[1]} (${s})`,value:e,symbol:s}})},searchedCryptocurrency(){return this.cryptocurrencyOptions.filter(e=>e.currency.toLowerCase().includes(this.searchValue.toLowerCase()))}},created(){this.setSelectedCryptocurrency({symbol:"",value:""})},methods:{...k("payer",["setSelectedCryptocurrency","setSelectedNetwork"]),image:A,selectHandler(e,s){e==="USDT"?this.setSelectedCryptocurrency({symbol:e,value:s}):(this.setSelectedCryptocurrency({symbol:e,value:s}),this.setSelectedNetwork({blockchain:s.split(".")[1],value:s}))}}});const Z={class:"title mb-15px"},ee={class:"input-wrapper mb-20px"},te={for:"search"},se=["placeholder"],oe={class:"flex flex-col gap-15px"},re=["onClick"],ae={class:"flex items-center gap-2"},ne=["src","alt"],ce={class:"flex flex-col"},de={class:"font-600 text-base"},le={key:0,class:"cryptocurrency-item-rate"},ie={class:"flex items-center gap-2"},pe={key:0,class:"cryptocurrency-item-amount"};function ye(e,s,u,f,$,v){const l=c("feather-icon");return o(),a("div",null,[t("div",Z,n(e.$t("Choose your cryptocurrency")),1),t("div",ee,[t("label",te,[y(l,{type:"search",size:"18",class:"search-icon"})]),g(t("input",{id:"search",class:"outline-none h-24px w-full text-center","onUpdate:modelValue":s[0]||(s[0]=r=>e.searchValue=r),type:"text",placeholder:e.$t("Search cryptocurrency")},null,8,se),[[M,e.searchValue]])]),t("div",oe,[(o(!0),a(C,null,S(e.searchedCryptocurrency,(r,i)=>(o(),a("div",{key:i,"aria-hidden":"true",class:P(["cryptocurrency-item",{"cryptocurrency-item-selected":e.selectedCryptocurrency.symbol===r.symbol}]),onClick:p=>e.selectHandler(r.symbol,r.value)},[t("div",ae,[t("img",{class:"w-36px",src:e.image(`${r.symbol}.svg`),alt:r.symbol},null,8,ne),t("div",ce,[t("span",de,n(r.currency),1),e.currencyRate[r.value]?(o(),a("span",le,n(`${e.currencyRate[r.value]} USD`),1)):d("",!0)])]),t("div",ie,[e.currencyAmount[r.value]?(o(),a("span",pe,n(`~ ${e.currencyAmount[r.value]} ${r.symbol}`),1)):d("",!0)])],10,re))),128))])])}const ue=m(Y,[["render",ye],["__scopeId","data-v-17ffafff"]]),he=_({data(){return{searchValue:""}},computed:{...h("payer",{payerCurrencies:"payerCurrencies",selectedCryptocurrency:"selectedCryptocurrency",selectedNetwork:"selectedNetwork"}),networkOptions(){return this.payerCurrencies.filter(e=>e.split(".")[0]==="USDT").map(e=>({title:e.split(".")[1]==="Tron"?`TRC20 (${e.split(".")[0]})`:e.split(".")[1]==="Eth"?`ERC20 (${e.split(".")[0]})`:"?",value:e,blockchain:e.split(".")[1]}))},searchedNetwork(){return this.networkOptions.filter(e=>e.title.toLowerCase().includes(this.searchValue.toLowerCase()))}},created(){this.setSelectedNetwork({symbol:"",value:""})},methods:{...k("payer",["setSelectedNetwork"]),image:A,selectHandler(e,s){this.setSelectedNetwork({blockchain:e,value:s})}}});const _e={class:"title mb-15px flex items-center gap-2 justify-center"},me=["src","alt"],fe={class:"input-wrapper mb-20px"},$e={for:"search"},ve=["placeholder"],we={class:"flex flex-col gap-15px"},ke=["onClick"],be=["src","alt"],ge={class:"text-base"};function Ce(e,s,u,f,$,v){const l=c("feather-icon");return o(),a("div",null,[t("div",_e,[t("span",null,n(e.$t("Select a network of")),1),e.selectedCryptocurrency.symbol?(o(),a("img",{key:0,class:"w-24px",src:e.image(`${e.selectedCryptocurrency.symbol}.svg`),alt:e.selectedCryptocurrency.symbol},null,8,me)):d("",!0)]),t("div",fe,[t("label",$e,[y(l,{type:"search",size:"18",class:"search-icon"})]),g(t("input",{id:"search",class:"outline-none h-24px w-full text-center","onUpdate:modelValue":s[0]||(s[0]=r=>e.searchValue=r),type:"text",placeholder:e.$t("Search network")},null,8,ve),[[M,e.searchValue]])]),t("div",we,[(o(!0),a(C,null,S(e.searchedNetwork,(r,i)=>(o(),a("div",{key:i,"aria-hidden":"true",class:P(["network-item",{"network-item-selected":e.selectedNetwork.blockchain===r.blockchain}]),onClick:p=>e.selectHandler(r.blockchain,r.value)},[t("img",{class:"w-36px",src:e.image(`${e.selectedCryptocurrency.symbol}.svg`),alt:r.symbol},null,8,be),t("span",ge,n(r.title),1)],10,ke))),128))])])}const Se=m(he,[["render",Ce],["__scopeId","data-v-7cbdf727"]]),Pe=_({components:{UiQrCodeNew:F,UiCopyToClipboard:O,UiButtonLoading:R},data(){return{showAddressBtnLoading:!1,qrKey:1}},computed:{...h("payer",{selectedCurrency:"selectedCryptocurrencyAndNetwork",selectedCryptocurrency:"selectedCryptocurrency",currencyAmount:"amount"}),...T("payer",{selectedPayerAddress:"selectedPayerAddress"}),qrKeyRerender(){var e;return`${this.qrKey}${(e=this.selectedPayerAddress)==null?void 0:e.address}`},payerId(){return this.$route.params.payer_id},qrCodeData(){var e,s;return(e=this.selectedPayerAddress)!=null&&e.address?(s=this.selectedPayerAddress)==null?void 0:s.address:"empty_address"},qrCodeImg(){var e;return(e=this.selectedPayerAddress)!=null&&e.address?`${this.selectedPayerAddress.currency}.svg`:"help-circle.svg"}},methods:{...V("payer",["loadPayer","loadPayerAddress"]),image:A,async showAddressHandler(e){try{this.showAddressBtnLoading=!0,await this.loadPayerAddress({payerId:this.payerId,currencyId:e}),await this.loadPayer(this.payerId),this.showAddressBtnLoading=!1,this.qrKey+=1}catch{this.showAddressBtnLoading=!1}}}});const Ae={class:"h-full flex flex-col"},Ne={class:"text-center"},Le={class:"font-600 text-22px"},De={class:"mt-16px mb-20px relative"},Ue={key:0,class:"qr-code-blur"},xe={key:1,class:"show-address-btn rounded-20px relative flex items-center z-100"},Ie=["src"],Me={class:"font-600 text-22px"},Te={class:"flex flex-col gap-10px py-15px relative"},Ve={key:0,class:"value-wrapper"},He={class:"label"},qe={class:"value"},Be={class:"value-wrapper"},Fe={class:"label"},ze={class:"value"},Oe={key:0};function Re(e,s,u,f,$,v){var p,b,N,L,D,U,x;const l=c("ui-qr-code-new"),r=c("ui-button-loading"),i=c("ui-copy-to-clipboard");return o(),a("div",Ae,[t("div",Ne,[t("div",Le,n(e.$t("Pay"))+" "+n(e.$t("with QR code")),1),t("div",De,[(o(),w(l,{data:e.qrCodeData,size:232,img:e.qrCodeImg,level:"M",color:"#3f4048",key:e.qrKeyRerender},null,8,["data","img"])),(p=e.selectedPayerAddress)!=null&&p.address?d("",!0):(o(),a("div",Ue)),(b=e.selectedPayerAddress)!=null&&b.address?d("",!0):(o(),a("div",xe,[t("img",{class:"w-40px absolute left-0 z-101",src:e.image(`${e.selectedCurrency}.svg`),alt:"crypto-icon"},null,8,Ie),y(r,{class:"text-white font-600 bg-dark-gray h-40px pl-12 pr-3 !rounded-20px whitespace-nowrap",loading:e.showAddressBtnLoading,onClick:s[0]||(s[0]=I=>e.showAddressHandler(e.selectedCurrency))},{default:H(()=>[q(n(e.$t("Show Address")),1)]),_:1},8,["loading"])]))]),t("div",Me,n(e.$t("Or copy the values from these fields")),1)]),t("div",Te,[e.currencyAmount[e.selectedCurrency]?(o(),a("div",Ve,[t("div",He,n(e.$t("amount")),1),t("div",qe,n(e.currencyAmount[e.selectedCurrency])+" "+n(e.selectedCryptocurrency.symbol),1),y(i,{class:"copy-icon",size:"22","text-to-copy":e.currencyAmount[e.selectedCurrency]},null,8,["text-to-copy"])])):d("",!0),t("div",Be,[t("div",Fe,n(e.$t("address")),1),t("div",ze,[(N=e.selectedPayerAddress)!=null&&N.address?(o(),a("span",Oe,n(`${(L=e.selectedPayerAddress)==null?void 0:L.address.slice(0,7)}
                ...${(D=e.selectedPayerAddress)==null?void 0:D.address.slice(-7)}`),1)):(o(),a(C,{key:1},S(14,I=>t("span",{key:I,class:"text-8px"},"‚óè")),64))]),y(i,{class:"copy-icon",size:"22","text-to-copy":(U=e.selectedPayerAddress)!=null&&U.address?(x=e.selectedPayerAddress)==null?void 0:x.address:" "},null,8,["text-to-copy"])])])])}const Ee=m(Pe,[["render",Re],["__scopeId","data-v-4dbd905c"]]),Ke=_({components:{ChooseCryptocurrency:ue,SelectNetwork:Se,InvoiceData:Ee},computed:{...h("payer",{step:"stepPayment",payer:"payer"})}});const je={class:"pages relative min-h-560px"},Qe={key:3,class:"absolute w-full h-full bottom-0 left-0 bg-s-gray rounded-20px"},Ge={class:"flex items-center justify-center h-full w-full text-dark-gray text-22px font-600"};function Je(e,s,u,f,$,v){const l=c("choose-cryptocurrency"),r=c("select-network"),i=c("invoice-data");return o(),a("div",je,[e.step===1?(o(),w(l,{key:0})):d("",!0),e.step===2?(o(),w(r,{key:1})):d("",!0),e.step===3?(o(),w(i,{key:2})):d("",!0),e.payer.store.staticAddress?d("",!0):(o(),a("div",Qe,[t("div",Ge,n(e.$t("Static Addresses Disabled")),1)]))])}const We=m(Ke,[["render",Je],["__scopeId","data-v-e04a408d"]]),Xe=_({components:{PaymentFormLocale:z},data(){return{isShowLocaleSelectDropdown:!1}},computed:{...h("app",{localeOptions:"localeOptions"}),...T("app",{selectedLocaleOption:"selectedLocaleOption"}),...h("payer",{step:"stepPayment",selectedCryptocurrency:"selectedCryptocurrency",selectedNetwork:"selectedNetwork"}),disabledNext(){return this.step===1?!this.selectedCryptocurrency.symbol:this.step===2?!this.selectedNetwork.blockchain:!0}},methods:{...k("app",["setLocale"]),...k("payer",["setStepPayment","setSelectedCryptocurrencyAndNetwork"]),nextStepHandler(){this.selectedCryptocurrency.symbol==="USDT"?this.setStepPayment(this.step+1):this.setStepPayment(3),this.setSelectedCryptocurrencyAndNetwork(`${this.selectedCryptocurrency.symbol}.${this.selectedNetwork.blockchain}`)},backHandler(){this.selectedCryptocurrency.symbol==="USDT"?this.setStepPayment(this.step-1):this.setStepPayment(1)},showDropdownMenu(){this.isShowLocaleSelectDropdown=!this.isShowLocaleSelectDropdown},closeLocaleSelectDropdown(){this.isShowLocaleSelectDropdown=!1},changeLocaleHandler(e){this.setLocale(e),this.$i18n.locale=e}}});const Ye={class:"font-600"},Ze=["disabled"],et={class:"font-600"},tt={class:"language"},st={class:"font-600"};function ot(e,s,u,f,$,v){const l=c("feather-icon"),r=c("payment-form-locale"),i=B("click-out");return o(),a("div",null,[t("div",{class:P(["grid gap-2 items-center",{"buttons-wrapper-2-next":e.step===1,"buttons-wrapper-2-back":e.step===3,"buttons-wrapper-3":e.step===2}])},[e.step!==1?(o(),a("button",{key:0,class:"back-step",onClick:s[0]||(s[0]=(...p)=>e.backHandler&&e.backHandler(...p))},[y(l,{type:"arrow-left",size:"18"}),t("span",Ye,n(e.$t("Back")),1)])):d("",!0),e.step!==3?(o(),a("button",{key:1,class:"next-step",disabled:e.disabledNext,onClick:s[1]||(s[1]=(...p)=>e.nextStepHandler&&e.nextStepHandler(...p))},[t("span",et,n(e.$t("Next step")),1),y(l,{type:"arrow-right",size:"18"})],8,Ze)):d("",!0),g((o(),a("div",{"aria-hidden":"true",class:"cursor-pointer relative z-99 language-btn",onClick:s[2]||(s[2]=(...p)=>e.showDropdownMenu&&e.showDropdownMenu(...p))},[t("div",tt,[t("span",st,n(e.selectedLocaleOption.title),1),y(l,{type:"chevron-down",size:"18"})]),e.isShowLocaleSelectDropdown?(o(),w(r,{key:0,"selected-locale":e.selectedLocaleOption,"locale-options":e.localeOptions,onChangeLocale:e.changeLocaleHandler,onCloseLocaleSelectDropdown:e.closeLocaleSelectDropdown},null,8,["selected-locale","locale-options","onChangeLocale","onCloseLocaleSelectDropdown"])):d("",!0)])),[[i,e.closeLocaleSelectDropdown]])],2)])}const rt=m(Xe,[["render",ot],["__scopeId","data-v-b179f36d"]]),at=_({});const nt={class:"footer"},ct={class:"text-base text-center"},dt={class:"text-md-gray"};function lt(e,s,u,f,$,v){return o(),a("div",nt,[t("div",ct,[t("span",dt,n(e.$t("Powered by"))+" DV Pay ",1)])])}const it=m(at,[["render",lt],["__scopeId","data-v-162d13a0"]]),pt=_({components:{PayerFormHeader:X,PayerPage:We,PayerFormNavButtons:rt,PayerFormFooter:it,UiSkeletonBox:E},data(){return{payerUpdateTimer:0,count:1}},computed:{...h("payer",{loading:"loading",payer:"payer"}),payerId(){return this.$route.params.payer_id},paymentMethod(){return this.$route.query.currency},amount(){const e=this.$route.query.amount;return Number(e)&&Number(e)>0&&Number(e)<10**6&&!(e!=null&&e.includes("e"))?e:""}},watch:{payer(){this.pollingData(),this.setActiveCurrency()}},beforeMount(){this.loadPayer(this.payerId),this.setLoading(!0),this.setAmountUsd(this.amount)},beforeUnmount(){clearTimeout(this.payerUpdateTimer)},methods:{...k("payer",["setLoading","setSelectedCryptocurrency","setSelectedNetwork","setSelectedCryptocurrencyAndNetwork","setStepPayment","setAmountUsd"]),...V("payer",["loadPayer"]),pollingData(){this.payerUpdateTimer=setTimeout(()=>{clearTimeout(this.payerUpdateTimer),this.loadPayer(this.payerId)},"10"*1e3)},setActiveCurrency(){if(this.paymentMethod&&this.payer.currency.length&&this.payer.currency.some(s=>s===this.paymentMethod)){const s=this.paymentMethod.toString().split(".")[0],u=this.paymentMethod.toString().split(".")[1];this.setSelectedCryptocurrency({symbol:s,value:this.paymentMethod}),this.setSelectedNetwork({blockchain:u,value:this.paymentMethod}),this.setSelectedCryptocurrencyAndNetwork(this.paymentMethod),this.setStepPayment(3)}}}});const yt={class:"payer relative"},ut={class:"body relative"},ht={class:"flex flex-col gap-4px"},_t={key:0,class:"text-2xl font-600"},mt={class:"text-xs leading-14px font-600 text-md-gray"},ft={class:"body-content"},$t={key:0,class:"w-full h-full left-0 top-0 border-x-gray rounded-20px overflow-hidden"},vt={key:0,class:"disabled-store"};function wt(e,s,u,f,$,v){const l=c("payer-form-header"),r=c("ui-skeleton-box"),i=c("payer-page"),p=c("payer-form-nav-buttons"),b=c("payer-form-footer");return o(),a("div",yt,[y(l),t("div",ut,[t("div",ht,[e.amount?(o(),a("span",_t,n(this.amount)+" USD ",1)):d("",!0),t("span",mt,n(e.payerId),1)]),t("div",ft,[e.loading?(o(),a("div",$t,[y(r,{height:"560px",width:"100%"})])):(o(),w(i,{key:1}))]),y(p),e.payer.store.status===0?(o(),a("div",vt,n(e.$t("payments_suspended_text")),1)):d("",!0)]),y(b)])}const At=m(pt,[["render",wt],["__scopeId","data-v-95fdfe0e"]]);export{At as default};
