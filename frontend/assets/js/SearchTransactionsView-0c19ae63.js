import{d as b,m as v,_ as y,o as n,c as o,a as e,t as a,F as u,q as m,i as f,n as p,f as D,k,r as d,e as h,w as A,j as x,l as L,g as R}from"./flag-icons.min-86ec5348.js";import{U as C}from"./UiButtonLoading-8a0e711d.js";import{U}from"./UiTable-55d04511.js";import{U as q}from"./UiInput-de72e1ee.js";import{U as B}from"./UiLoading-237702fa.js";import"./UiSelect-ea4bca5c.js";import"./UiPagination-4e2c3226.js";function S(t){return new Promise(r=>{setTimeout(r,t)})}const O=b({data(){return{tableColumns:[{label:"Tx Id",field:"txId",textAlign:"text-left"},{label:"Currency",field:"currency",textAlign:"text-left"},{label:"Blockchain",field:"blockchain",textAlign:"text-left"},{label:"Contract Address",field:"contractAddress",textAlign:"text-left"},{label:"Amount",field:"amount",textAlign:"text-left"},{label:"Amount In USD",field:"amountUsd",textAlign:"text-left"},{label:"Rate",field:"rate",textAlign:"text-left"},{label:"Time",field:"time",textAlign:"text-left"},{label:"Receiver",field:"receiver",textAlign:"text-left"},{label:"Sender",field:"sender",textAlign:"text-left"},{label:"Status",field:"status",textAlign:"text-left"}]}},computed:{dataLength(){return Object.keys(this.transactionDetails).length},...v("transactions",{transactionDetails:"getTransactionDetails"})}}),N={key:0,class:"card"},E={class:"card-title mb-4"},j={class:"w-full"},F={class:"break-all py-2"};function z(t,r,c,g,_,$){return t.dataLength?(n(),o("div",N,[e("div",E,a(t.$t("Transaction Details")),1),e("table",j,[e("tbody",null,[(n(!0),o(u,null,m(t.tableColumns,(i,s)=>(n(),o("tr",{key:s,class:"border-b"},[e("th",{class:p(["py-2 pr-3 font-500 text-gray-600",i.textAlign])},a(t.$t(i.label)),3),e("td",F,a(t.transactionDetails[i.field]),1)]))),128))])])])):f("",!0)}const J=y(O,[["render",z]]),M=b({components:{UiButtonLoading:C},data(){return{tableColumns:[{label:"Invoice Id",field:"id",textAlign:"text-left"},{label:"Order Id",field:"orderId",textAlign:"text-left"},{label:"Store",field:"store",textAlign:"text-left"},{label:"Store Id",field:"storeId",textAlign:"text-left"},{label:"Created Date",field:"createdAt",textAlign:"text-left"},{label:"Expiration Date",field:"expiredAt",textAlign:"text-left"},{label:"Amount",field:"amount",textAlign:"text-left"},{label:"Status",field:"status",textAlign:"text-left"}],btnLoading:!1}},computed:{dataLength(){return Object.keys(this.transactionInvoice).length},...D("transactions",{transactionDetails:"transactionDetails"}),...v("transactions",{transactionInvoice:"getTransactionInvoice"})},methods:{async reSendWebhookHandler(){try{this.btnLoading=!0,await this.reSendWebhook(this.transactionInvoice.id),await S(5e3),await this.searchTransaction(this.transactionDetails.txId),this.$toast.success(this.$t("Webhook was successfully sent")),this.btnLoading=!1}catch{this.btnLoading=!1}},...k("transactions",["reSendWebhook","searchTransaction"])}}),G={key:0,class:"card"},K={class:"card-title mb-4"},Q={class:"w-full mb-6"},X={class:"break-all py-2"},Y={class:"break-all py-2"},Z={class:"py-2"},tt={class:"py-2"},et={class:"break-all py-2"};function st(t,r,c,g,_,$){const i=d("ui-button-loading");return t.dataLength?(n(),o("div",G,[e("div",K,a(t.$t("Related Invoice")),1),e("table",Q,[e("tbody",null,[(n(!0),o(u,null,m(t.tableColumns,(s,l)=>(n(),o("tr",{key:l,class:"border-b"},[s.field==="store"?(n(),o(u,{key:0},[e("th",{class:p(["py-2 pr-3 font-500 text-gray-600",s.textAlign])},a(t.$t(s.label)),3),e("td",X,a(t.transactionInvoice.store.title),1)],64)):s.field==="storeId"?(n(),o(u,{key:1},[e("th",{class:p(["py-2 pr-3 font-500 text-gray-600",s.textAlign])},a(t.$t(s.label)),3),e("td",Y,a(t.transactionInvoice.store.id),1)],64)):s.field==="amount"?(n(),o(u,{key:2},[e("th",{class:p(["py-2 pr-3 font-500 text-gray-600",s.textAlign])},a(t.$t(s.label)),3),e("td",Z,a(t.transactionInvoice.amount)+" $ ",1)],64)):s.field==="status"?(n(),o(u,{key:3},[e("th",{class:p(["py-2 pr-3 font-500 text-gray-600",s.textAlign])},a(t.$t(s.label)),3),e("td",tt,a(t.$t(t.transactionInvoice.status)),1)],64)):(n(),o(u,{key:4},[e("th",{class:p(["py-2 pr-3 font-500 text-gray-600",s.textAlign])},a(t.$t(s.label)),3),e("td",et,a(t.transactionInvoice[s.field]),1)],64))]))),128))])]),h(i,{class:"button button-primary py-2 px-4 self-start",loading:t.btnLoading,onClick:t.reSendWebhookHandler},{default:A(()=>[x(a(t.$t("Re-Send webhook")),1)]),_:1},8,["loading","onClick"])])):f("",!0)}const at=y(M,[["render",st]]),nt=b({data(){return{tableColumns:[{label:"Url",field:"url",textAlign:"text-left"},{label:"Created At",field:"createdAt",textAlign:"text-left"},{label:"Status Code",field:"statusCode",textAlign:"text-center"},{label:"Request",field:"request",textAlign:"text-center"},{label:"Response",field:"response",textAlign:"text-center"}],requestsArray:[],responseArray:[]}},computed:{...v("transactions",{transactionWebhooks:"getTransactionWebhooks"})},watch:{transactionWebhooks(){this.requestsArray=Array(this.transactionWebhooks.length).fill(!1),this.responseArray=Array(this.transactionWebhooks.length).fill(!1)}},methods:{showHideRequests(t){this.requestsArray=this.requestsArray.map((r,c)=>t===c?!this.requestsArray[c]:this.requestsArray[c])},showHideResponses(t){this.responseArray=this.responseArray.map((r,c)=>t===c?!this.responseArray[c]:this.responseArray[c])}}});const ot={key:0,class:"card"},it={class:"card-title mb-4"},rt={class:"h-scroll"},lt={class:"w-full"},ct={class:"border-b border-gray-200"},dt={key:0,class:"break-all"},ht=["onClick"],ut={key:0,class:"link"},pt={key:1,class:"link"},ft={key:0,class:"pre text-left"},bt=["onClick"],yt={key:0,class:"link"},gt={key:1,class:"link"},_t={key:0,class:"pre text-left"};function $t(t,r,c,g,_,$){return t.transactionWebhooks.length?(n(),o("div",ot,[e("div",it,a(t.$t("Related Webhooks")),1),e("div",rt,[e("table",lt,[e("thead",null,[e("tr",ct,[(n(!0),o(u,null,m(t.tableColumns,(i,s)=>(n(),o("th",{key:s,class:p(["text-gray-600 font-500 uppercase py-4 px-3 align-top text-12px",[i.textAlign,{"request-col":i.field==="request","response-col":i.field==="response"}]])},[e("div",null,a(t.$t(i.label)),1)],2))),128))])]),e("tbody",null,[(n(!0),o(u,null,m(t.transactionWebhooks,(i,s)=>(n(),o("tr",{key:s,class:"border-b border-gray-200"},[(n(!0),o(u,null,m(t.tableColumns,(l,I)=>(n(),o("td",{key:I,class:p(["py-4 px-3",[l.textAlign,{"request-col":l.field==="request","response-col":l.field==="response"}]])},[l.field==="url"?(n(),o("div",dt,a(i.url),1)):l.field==="request"?(n(),o(u,{key:1},[e("div",{"aria-hidden":"true",onClick:T=>t.showHideRequests(s)},[t.requestsArray[s]?(n(),o("span",pt,a(t.$t("Hide")),1)):(n(),o("span",ut,a(t.$t("Show")),1))],8,ht),t.requestsArray[s]?(n(),o("pre",ft,a(JSON.parse(i.request,null,2)),1)):f("",!0)],64)):l.field==="response"?(n(),o(u,{key:2},[e("div",{"aria-hidden":"true",onClick:T=>t.showHideResponses(s)},[t.responseArray[s]?(n(),o("span",gt,a(t.$t("Hide")),1)):(n(),o("span",yt,a(t.$t("Show")),1))],8,bt),t.responseArray[s]?(n(),o("pre",_t,a(JSON.parse(i.response,null,2)),1)):f("",!0)],64)):(n(),o(u,{key:3},[x(a(i[l.field]),1)],64))],2))),128))]))),128))])])])])):f("",!0)}const mt=y(nt,[["render",$t],["__scopeId","data-v-56507968"]]),At=b({components:{UiTable:U},data(){return{tableColumns:[{label:"Invoice Id",field:"id",textAlign:"text-left"},{label:"Order Id",field:"orderId",textAlign:"text-center"},{label:"Store",field:"store",textAlign:"text-center"},{label:"Created Date",field:"createdAt",textAlign:"text-center"},{label:"Expiration Date",field:"expiredAt",textAlign:"text-center"},{label:"Amount",field:"amount",textAlign:"text-center"},{label:"Status",field:"status",textAlign:"text-center"},{label:"Actions",field:"actions",textAlign:"text-right"}],loading:!1}},computed:{...D("transactions",{transactionDetails:"transactionDetails"}),...v("transactions",{transactionInvoices:"getTransactionInvoices"})},methods:{async attachInvoiceHandler(t){try{this.loading=!0,await this.attachInvoice({transactionId:this.transactionDetails.txId,invoiceId:t}),await S(5e3),await this.searchTransaction(this.transactionDetails.txId),this.loading=!1,this.$toast.success(this.$t("Relate successfully created"))}catch{this.loading=!1}},...k("transactions",["attachInvoice","searchTransaction"])}}),vt={key:0,class:"card"},kt={class:"card-title mb-4"},xt=["onClick"];function It(t,r,c,g,_,$){const i=d("ui-table");return t.transactionInvoices.length?(n(),o("div",vt,[e("div",kt,a(t.$t("Probably Related Invoices")),1),h(i,{columns:t.tableColumns,data:t.transactionInvoices,loading:t.loading},{"cell-store":A(({row:s})=>[x(a(s.store.title),1)]),"cell-actions":A(({row:s})=>[e("button",{class:"button button-primary py-1 px-2",onClick:l=>t.attachInvoiceHandler(s.id)},a(t.$t("Attach")),9,xt)]),_:1},8,["columns","data","loading"])])):f("",!0)}const Tt=y(At,[["render",It]]),wt=b({components:{UiButtonLoading:C},data(){return{tableColumns:[{label:"Store",field:"storeName",textAlign:"text-left"},{label:"Payer Id",field:"id",textAlign:"text-left"}],btnLoading:!1}},computed:{...v("transactions",{transactionDetails:"getTransactionDetails"}),isPayerExist(){var t,r,c;return Object.keys(this.transactionDetails).length?((t=this.transactionDetails)==null?void 0:t.payer)&&!!((c=Object.keys((r=this.transactionDetails)==null?void 0:r.payer))!=null&&c.length):!1}},methods:{...k("transactions",["attachTransactionToPayer","searchTransaction"]),async attachToPayer(){try{this.btnLoading=!0,await this.attachTransactionToPayer(this.transactionDetails.txId),await S(5e3),await this.searchTransaction(this.transactionDetails.txId),this.$toast.success(this.$t("Transaction was successfully attached to payer")),this.btnLoading=!1}catch{this.btnLoading=!1}}}}),Dt={key:0,class:"card"},Ct={class:"card-title mb-4"},St={class:"w-full mb-6"},Lt={class:"break-all py-2"};function qt(t,r,c,g,_,$){const i=d("ui-button-loading");return t.isPayerExist?(n(),o("div",Dt,[e("div",Ct,a(t.$t("Payer Information")),1),e("table",St,[e("tbody",null,[(n(!0),o(u,null,m(t.tableColumns,(s,l)=>(n(),o("tr",{key:l,class:"border-b"},[e("th",{class:p(["py-2 pr-3 font-500 text-gray-600",s.textAlign])},a(t.$t(s.label)),3),e("td",Lt,a(t.transactionDetails.payer[s.field]),1)]))),128))])]),h(i,{class:"button button-primary py-2 px-4 self-start",loading:t.btnLoading,onClick:t.attachToPayer},{default:A(()=>[x(a(t.$t("Attach to payer")),1)]),_:1},8,["loading","onClick"])])):f("",!0)}const Vt=y(wt,[["render",qt]]),Ht=b({components:{UiInput:q,UiButtonLoading:C},data(){return{invoiceId:"",btnLoading:!1}},computed:{...D("transactions",{transactionDetails:"transactionDetails"})},methods:{...k("transactions",["forceAttachInvoice","searchTransaction"]),async forceAttachHandler(){try{this.btnLoading=!0,await this.forceAttachInvoice({transactionId:this.transactionDetails.txId,invoiceId:this.invoiceId}),await this.searchTransaction(this.transactionDetails.txId),this.btnLoading=!1,this.$toast.success(this.$t("Relate successfully created"))}catch(t){t.status===422?this.$toast.error(this.$t("This transaction already attached")):this.$toast.error(t.message),this.btnLoading=!1}}}}),Pt={key:0,class:"card"},Wt={class:"card-title mb-4"};function Rt(t,r,c,g,_,$){const i=d("ui-input"),s=d("ui-button-loading");return t.transactionDetails.txId?(n(),o("div",Pt,[e("div",Wt,a(t.$t("Force attach to invoice")),1),e("form",{class:"common-wrapper flex flex-col gap-6",onSubmit:r[1]||(r[1]=L((...l)=>t.forceAttachHandler&&t.forceAttachHandler(...l),["prevent"]))},[h(i,{modelValue:t.invoiceId,"onUpdate:modelValue":r[0]||(r[0]=l=>t.invoiceId=l),type:"text",id:"attachInvoiceId",label:t.$t("Invoice Id"),placeholder:t.$t("Enter invoice id")},null,8,["modelValue","label","placeholder"]),h(s,{class:"button button-primary py-2 px-4 self-start",type:"submit",loading:t.btnLoading},{default:A(()=>[x(a(t.$t("Force Attach")),1)]),_:1},8,["loading"])],32)])):f("",!0)}const Ut=y(Ht,[["render",Rt]]),Bt=b({components:{TransactionDetails:J,TransactionInvoice:at,TransactionWebhooks:mt,TransactionInvoices:Tt,TransactionPayer:Vt,ForceAttachToInvoice:Ut,UiLoading:B,UiInput:q},data(){return{searchValue:"",loading:!1}},computed:{txId(){return this.$route.params.tx_id}},watch:{txId(){this.txId||this.$store.commit("app/setProgressBar","stop")}},async created(){this.txId&&(this.searchValue=this.txId,await this.search(),this.$store.commit("app/setProgressBar","stop")),this.$store.commit("app/setProgressBar","stop")},unmounted(){this.resetData()},methods:{searchHandler(){this.$router.push({name:"support-search-tx",params:{tx_id:this.searchValue}}),this.searchValue?this.search():this.resetData()},async search(){try{this.loading=!0,await this.searchTransaction(this.searchValue),this.loading=!1,this.$store.commit("app/setProgressBar","stop")}catch{this.loading=!1,this.$store.commit("app/setProgressBar","stop")}},...k("transactions",["searchTransaction"]),...R("transactions",["resetData"])}});const Ot={class:"page-title mb-6"},Nt={class:"search-group"},Et={class:"button button-search",type:"submit"},jt={class:"tx-details"};function Ft(t,r,c,g,_,$){const i=d("ui-input"),s=d("feather-icon"),l=d("ui-loading"),I=d("transaction-details"),T=d("transaction-payer"),V=d("force-attach-to-invoice"),H=d("transaction-invoice"),P=d("transaction-webhooks"),W=d("transaction-invoices");return n(),o("div",null,[e("div",Ot,a(t.$t("Search Transactions")),1),e("form",{class:"mb-6 relative",onSubmit:r[1]||(r[1]=L((...w)=>t.searchHandler&&t.searchHandler(...w),["prevent"]))},[e("div",Nt,[h(i,{modelValue:t.searchValue,"onUpdate:modelValue":r[0]||(r[0]=w=>t.searchValue=w),type:"text",class:"input-search",spellcheck:!1,placeholder:t.$t("Search by Tx Hash")},null,8,["modelValue","placeholder"]),e("button",Et,[h(s,{type:"search",size:"16"}),e("span",null,a(t.$t("Search")),1)])]),h(l,{loading:t.loading,size:"24"},null,8,["loading"])],32),e("div",jt,[h(I),h(T),h(V),h(H)]),h(P,{class:"mt-10"}),h(W,{class:"mt-10"})])}const Yt=y(Bt,[["render",Ft],["__scopeId","data-v-000c8415"]]);export{Yt as default};
