import{d as k,f as p,k as y,_,r as c,o as s,c as l,a as t,t as n,h as i,l as b,F as u,q as h,w as v,i as U,e as x,j as L}from"./flag-icons.min-86ec5348.js";import{U as V}from"./UiCheckbox-fa9f1ce9.js";import{U as $}from"./UiButtonLoading-8a0e711d.js";import{U as w}from"./UiSkeletonBox-7e5f2b59.js";const R=k({components:{UiCheckbox:V,UiButtonLoading:$,UiSkeletonBox:w},data(){return{skeletonLoading:!0,selectedRoles:[],buttonLoading:!1}},computed:{...p("users",{user:"user"}),...p("dictionaries",{roles:"roles"}),userId(){return this.$route.params.user_id}},watch:{user(){this.syncDataFromVuex()}},created(){this.loadUserData(),this.syncDataFromVuex()},methods:{...y("users",["loadUser","updateUserRoles"]),syncDataFromVuex(){this.user.roles.length&&(this.selectedRoles=this.roles.map(e=>({title:e,value:e,checked:!!this.user.roles.find(o=>o===e)})))},async loadUserData(){try{await this.loadUser(this.userId),this.skeletonLoading=!1}catch{this.skeletonLoading=!1}},async saveHandler(){const e=this.selectedRoles.filter(o=>o.checked).map(o=>o.value);try{this.buttonLoading=!0,await this.updateUserRoles({userId:this.userId,payload:{roles:e}}),this.$toast.success(this.$t("User roles successfully updated")),this.buttonLoading=!1}catch{this.buttonLoading=!1}}}}),B={class:"page-title mb-6 flex items-center gap-2"},D={class:"card common-wrapper"},C={class:"card-title mb-4"},F={class:"mb-6"},S={key:1,class:"flex items-center gap-4"},I={class:"flex items-center gap-4 h-21px"},N={class:"card-title"},H={class:"flex items-center justify-center gap-2"},j={key:0,class:"bg-gray-200 rounded py-1 px-2"},A={key:0,class:"flex flex-col gap-4"},E={key:1,class:"flex flex-col gap-4"};function q(e,o,M,T,z,G){const r=c("ui-skeleton-box"),m=c("ui-checkbox"),f=c("ui-button-loading");return s(),l("div",null,[t("div",B,[t("span",null,n(e.$t("User")),1),t("span",null,n(e.user.email),1)]),t("div",D,[t("div",C,n(e.$t("User info")),1),t("div",F,[e.skeletonLoading?(s(),i(r,{key:0,width:"100%",height:"22px"})):(s(),l("div",S,[t("span",null,n(e.$t("Email"))+":",1),t("span",null,n(e.user.email),1)]))]),t("form",{onSubmit:o[0]||(o[0]=b((...a)=>e.saveHandler&&e.saveHandler(...a),["prevent"])),class:"flex flex-col gap-6"},[t("div",I,[t("div",N,n(e.$t("User roles")),1),t("div",H,[(s(!0),l(u,null,h(e.selectedRoles,(a,d)=>(s(),l("div",{key:d},[a.checked?(s(),l("span",j,n(a.title),1)):U("",!0)]))),128))])]),e.skeletonLoading?(s(),l("div",A,[(s(),l(u,null,h(3,a=>x(r,{key:a,width:"100%",height:"20px"})),64))])):(s(),l("div",E,[(s(!0),l(u,null,h(e.selectedRoles,(a,d)=>(s(),i(m,{class:"self-start",key:d,id:a.value,label:a.title,modelValue:a.checked,"onUpdate:modelValue":g=>a.checked=g},null,8,["id","label","modelValue","onUpdate:modelValue"]))),128))])),e.skeletonLoading?(s(),i(r,{key:2,width:"100%",height:"36px"})):(s(),i(f,{key:3,class:"button button-primary py-2 px-4 self-start",type:"submit",loading:e.buttonLoading},{default:v(()=>[L(n(e.$t("Save")),1)]),_:1},8,["loading"]))],32)])])}const Q=_(R,[["render",q]]);export{Q as default};
