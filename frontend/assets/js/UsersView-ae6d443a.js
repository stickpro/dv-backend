import{d as f,m as b,f as p,k as P,_,r as g,o as s,c as l,a as r,t as o,e as c,w as i,i as U,F as y,q as A,j as C}from"./flag-icons.min-86ec5348.js";import{U as w}from"./UiTable-55d04511.js";import"./UiSelect-ea4bca5c.js";import"./UiPagination-4e2c3226.js";import"./UiLoading-237702fa.js";const D=f({components:{UiTable:w},data(){return{tableColumns:[{label:"Email",field:"email",textAlign:"text-left"},{label:"Registration date",field:"created_at",textAlign:"text-center"},{label:"Owner id",field:"processing_owner_id",textAlign:"text-center"},{label:"Roles",field:"roles",textAlign:"text-center"},{label:"Actions",field:"actions",textAlign:"text-right"}],loading:!1,currentPage:"1",perPageDefault:"25"}},computed:{...b("users",{userList:"getAllUserList"}),...p("users",{pagination:"pagination"}),...p("user",{userInfo:"userInfo"})},async created(){this.userList.length&&this.$store.commit("app/setProgressBar","stop"),await this.loadAllUsersData(this.currentPage,this.perPageDefault),this.$store.commit("app/setProgressBar","stop")},methods:{...P("users",["loadAllUsers","deleteUser"]),async loadAllUsersData(e,t){try{const n={page:e,perPage:t};await this.loadAllUsers(n),this.loading=!1}catch{this.loading=!1,this.$store.commit("app/setProgressBar","stop")}},async deleteUserHandler(e){try{this.loading=!0,await this.deleteUser(e),await this.loadAllUsersData(this.currentPage,this.perPageDefault),this.loading=!1}catch{this.loading=!1}},perPageSelectHandler(e,t){this.loading=!0,this.loadAllUsersData(e,t)},pageChangeHandler(e,t){this.loading=!0,this.loadAllUsersData(e,t)}}}),$={class:"page-title mb-6"},k={key:0,class:"card relative"},v={class:"flex items-center justify-center gap-2"},x={class:"flex justify-end gap-4"},B=["disabled","onClick"];function H(e,t,n,L,S,V){const u=g("router-link"),m=g("ui-table");return s(),l("div",null,[r("div",$,o(e.$t("Users")),1),e.userList.length?(s(),l("div",k,[c(m,{columns:e.tableColumns,data:e.userList,paginationable:"",loading:e.loading,"per-page-default":e.perPageDefault,"total-entries":e.pagination.total,onPerPageSelectChanged:e.perPageSelectHandler,onPageChanged:e.pageChangeHandler},{"cell-roles":i(({row:a})=>[r("div",v,[(s(!0),l(y,null,A(a.roles,(d,h)=>(s(),l("span",{key:h,class:"text-gray-600 px-2 py-1 rounded bg-gray-200"},o(d),1))),128))])]),"cell-actions":i(({row:a})=>[r("div",x,[c(u,{to:{name:"all-users-user",params:{user_id:a.id}},class:"button button-primary py-1 px-2"},{default:i(()=>[C(o(e.$t("Update roles")),1)]),_:2},1032,["to"]),r("button",{class:"button button-error py-1 px-2",disabled:a.email===e.userInfo.email,onClick:d=>e.deleteUserHandler(a.id)},o(e.$t("Delete")),9,B)])]),_:1},8,["columns","data","loading","per-page-default","total-entries","onPerPageSelectChanged","onPageChanged"])])):U("",!0)])}const R=_(D,[["render",H]]);export{R as default};
