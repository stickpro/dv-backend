import{d as m,f as d,g as k,k as c,_ as w,r as a,o as i,c as l,a as o,t as n,l as y,e as r,w as f,n as T,i as _,j as g}from"./flag-icons.min-86ec5348.js";import{U as v}from"./UiSelect-ea4bca5c.js";import{U as W}from"./UiButtonLoading-8a0e711d.js";import{U as I}from"./UiInput-de72e1ee.js";const R=m({components:{UiSelect:v,UiButtonLoading:W,UiInput:I},data(){return{orderId:"",webhookType:"",buttonLoading:!1}},computed:{storeIdFromUrl(){return this.$route.params.store_id},webhookTypeSelected:{get(){var e;return this.webhookType?this.webhookType:(e=this.webhookTypes[0])==null?void 0:e.value},set(e){this.webhookType=e}},webhookId(){return this.$route.params.webhook_id},...d("dictionaries",["webhookTypes"]),...d("stores",["testWebhookResponse"])},unmounted(){this.removeWebhookResponseBlock()},methods:{async sendTestWebhookHandler(){try{this.buttonLoading=!0,await this.sendTestWebhook({storeId:this.storeIdFromUrl,webhookId:this.webhookId,payload:{eventType:this.webhookTypeSelected,orderId:this.orderId}}),this.buttonLoading=!1}catch{this.buttonLoading=!1}},removeWebhookResponseBlock(){this.setTestWebhookResponse("{}")},...k("stores",["setTestWebhookResponse"]),...c("stores",["sendTestWebhook"])}});const V={class:"card common-wrapper mb-10"},$={class:"text-2xl mb-6"},S={class:"flex flex-col gap-2"},U={for:"webhookTypes",class:"self-start"},B={key:0,class:"webhook-response common-wrapper"},L={class:"flex items-center gap-2 px-2 py-1"},C={class:"font-600"},H={class:"text-cyan-500"},M=["innerHTML"];function N(e,s,q,z,E,F){const p=a("ui-input"),h=a("ui-select"),b=a("ui-button-loading"),u=a("feather-icon");return i(),l("div",null,[o("div",V,[o("div",$,n(e.$t("Send a test event to a webhook endpoint")),1),o("form",{class:"form",onSubmit:s[2]||(s[2]=y((...t)=>e.sendTestWebhookHandler&&e.sendTestWebhookHandler(...t),["prevent"]))},[r(p,{required:"","label-required-mark":"on",modelValue:e.orderId,"onUpdate:modelValue":s[0]||(s[0]=t=>e.orderId=t),type:"text",id:"orderId",label:e.$t("Order Id")},null,8,["modelValue","label"]),o("div",S,[o("label",U,n(e.$t("Event type")),1),r(h,{id:"webhookTypes",class:"max-w-280px h-40px",modelValue:e.webhookTypeSelected,"onUpdate:modelValue":s[1]||(s[1]=t=>e.webhookTypeSelected=t),options:e.webhookTypes},null,8,["modelValue","options"])]),r(b,{class:"button button-primary py-2 px-4 self-start mt-4",type:"submit",loading:e.buttonLoading},{default:f(()=>[g(n(e.$t("Send test webhook")),1)]),_:1},8,["loading"])],32)]),e.testWebhookResponse.status?(i(),l("div",B,[o("div",{class:T(["text-xl font-600 px-2 py-1",[e.testWebhookResponse.status>=200&&e.testWebhookResponse.status<300?"bg-emerald-100":"bg-danger-200"]])},n(e.$t("webhook response")),3),o("div",L,[o("span",C,n(e.$t("status"))+": ",1),o("span",H,n(e.testWebhookResponse.status),1)]),o("pre",{innerHTML:e.testWebhookResponse.message,class:"pre"},null,8,M),o("button",{class:"close",onClick:s[3]||(s[3]=(...t)=>e.removeWebhookResponseBlock&&e.removeWebhookResponseBlock(...t))},[r(u,{type:"x",size:"18","stroke-width":"2.5"})])])):_("",!0)])}const O=w(R,[["render",N],["__scopeId","data-v-7b521454"]]);export{O as default};
